(function(e){function t(t){for(var r,s,i=t[0],c=t[1],u=t[2],d=0,g=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&g.push(a[s][0]),a[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);l&&l(t);while(g.length)g.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,i=1;i<n.length;i++){var c=n[i];0!==a[c]&&(r=!1)}r&&(o.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},a={app:0},o=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var l=c;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";n("352b")},"087b":function(e,t,n){},"226e":function(e,t,n){},"2e64":function(e,t,n){},3450:function(e,t,n){"use strict";n("e3ff")},"352b":function(e,t,n){},"3ae5":function(e,t,n){},4205:function(e,t,n){"use strict";n("3ae5")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("layout")},o=[],s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[!0===e.isLoggedUser?n("v-container",[n("v-row",[n("v-col",{attrs:{cols:12}},[n("v-app-bar",{attrs:{dark:""}},[n("v-toolbar-title",{staticClass:"mr-6"},[n("router-link",{attrs:{to:{name:"home"}}},[n("span",{staticClass:"link"},[e._v("Home")])])],1),!0===e.isLoggedUser?n("v-toolbar-title",{staticClass:"mr-6"},[n("router-link",{attrs:{to:{name:"admin"}}},[n("span",{staticClass:"link"},[e._v("Admin")])])],1):e._e(),n("v-toolbar-title",{staticClass:"mr-6"},[!1===e.isLoggedUser?n("router-link",{attrs:{to:{name:"login"}}},[n("span",{staticClass:"link"},[e._v("Login")])]):n("span",{staticClass:"link",on:{click:function(t){return e.logoutUser()}}},[e._v("Logout")])],1)],1)],1)],1)],1):e._e(),e.isShow?n("v-main",[n("Alert"),n("router-view",{key:e.$router})],1):e._e()],1)},i=[],c=n("5530"),u=n("1da1"),l=(n("96cf"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"alert-popup hide",attrs:{id:"alert"}})}),d=[],g=new r["a"];function p(e,t){g.$emit("events",{type:"events",success:e,message:t})}var v={name:"Alert"},h=function(e){var t=document.getElementById("alert");t.innerText=e.message,t.classList.remove("hide"),setTimeout((function(){t.classList.add("hide")}),2500)};g.$on("events",h);var m=v,f=(n("a52e"),n("2877")),b=Object(f["a"])(m,l,d,!1,null,"1db5a99a",null),w=b.exports,x=n("2f62"),k={name:"LayoutDefault",components:{Alert:w},created:function(){return Object(u["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},data:function(){return{userid:{type:String,default:""},playlists:null,isShow:!0}},methods:Object(c["a"])(Object(c["a"])(Object(c["a"])({},Object(x["b"])({logout:"authMod/logout"})),Object(x["c"])({isLogged:"authMod/isLoggedIn",getUser:"authMod/getCurrentUser",getCurrentUser:"authMod/getCurrentUser"})),{},{logoutUser:function(){this.isShow=!this.isShow,this.isShow=!this.isShow,this.logout(),this.isLoggedUser()}}),computed:{user:function(){return this.getUser(this.userid)},currentUsername:function(){var e=this.getCurrentUser();return e.username},isLoggedUser:function(){return this.isLogged()}}},P=k,_=(n("b5c6"),n("6544")),E=n.n(_),I=n("7496"),C=n("40dc"),S=n("62ad"),O=n("a523"),T=n("f6c4"),y=n("0fd9"),A=n("2a7f"),R=Object(f["a"])(P,s,i,!1,null,null,null),V=R.exports;E()(R,{VApp:I["a"],VAppBar:C["a"],VCol:S["a"],VContainer:O["a"],VMain:T["a"],VRow:y["a"],VToolbarTitle:A["a"]});var N={name:"App",components:{Layout:V},data:function(){return{items:[{title:"Click Me"},{title:"Click Me"},{title:"Click Me"},{title:"Click Me 2"}]}}},j=N,D=(n("034f"),Object(f["a"])(j,a,o,!1,null,null,null)),U=D.exports,M=n("f309");r["a"].use(M["a"]);var L,G=new M["a"]({}),B=(n("d3b7"),"authDB"),K=1,z={getDb:function(){return Object(u["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){if(L)return e(L);var t=window.indexedDB.open(B,K);t.onerror=function(e){console.log(e),Promise.reject(new Error("Error"))},t.onsuccess=function(t){L=t.target.result,e(L)},t.onupgradeneeded=function(e){var t=e.target.result;t.createObjectStore("userAuth",{autoIncrement:!0,keyPath:"username"})}})));case 1:case"end":return e.stop()}}),e)})))()},addUser:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.getDb();case 2:return r=n.sent,n.abrupt("return",new Promise((function(t){var n=r.transaction(["userAuth"],"readwrite");n.oncomplete=function(){t()};var a=n.objectStore("userAuth");a.openCursor().onsuccess=function(t){var n=t.target.result;n&&(n.value.username!==e.username&&a.delete(n.value.username),n.continue())},a.put(e)})));case 4:case"end":return n.stop()}}),n)})))()},removeUser:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e&&e.username){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,t.getDb();case 4:return r=n.sent,n.abrupt("return",new Promise((function(t){var n=r.transaction(["userAuth"],"readwrite");n.oncomplete=function(){t()};var a=n.objectStore("userAuth");a.delete(e.username)})));case 6:case"end":return n.stop()}}),n)})))()},getUser:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getDb();case 2:return n=t.sent,t.abrupt("return",new Promise((function(e){var t=n.transaction(["userAuth"],"readwrite");t.oncomplete=function(){e(r)};var r=null,a=t.objectStore("userAuth");a.openCursor().onsuccess=function(e){var t=e.target.result;t&&(r=t.value)}})));case 4:case"end":return t.stop()}}),t)})))()}},H=n("1232"),$="https://thawing-sea-83431.herokuapp.com",F={login:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function n(){var r,a,o,s,i,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.username,a=t.password,n.prev=1,e.commit("setUsername"),console.log(e.getters.username),n.next=6,fetch($+"/api/v1/auth/login",{method:"POST",body:JSON.stringify({username:r,password:a})});case 6:if(o=n.sent,o.ok){n.next=11;break}return console.log("Cannot login!"),console.log(o),n.abrupt("return");case 11:return n.next=13,o.json();case 13:return s=n.sent,console.log(s),i=s.accessToken,c=s.refreshToken,n.next=18,z.addUser({username:r,password:a});case 18:e.commit("LOGIN",{username:r,accessToken:i,refreshToken:c}),console.log("context.state.user after login"),console.log(e.state.user),e.commit("SET_COOKIE",{username:r,accessToken:i,refreshToken:c}),e.commit("SET_REFRESH_TOKEN_COOKIE",{refreshToken:c}),n.next=28;break;case 25:n.prev=25,n.t0=n["catch"](1),console.log(n.t0);case 28:case"end":return n.stop()}}),n,null,[[1,25]])})))()},logout:function(e){return Object(u["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,n={username:e.getters.getCurrentUser.username},t.next=4,z.removeUser(n);case 4:console.log("logout"),e.commit("SET_ACCESS_TOKEN",{accessToken:""}),e.commit("LOGOUT"),e.commit("ERASE_COOKIE",{cookies:["username","accessToken"]}),e.commit("SET_REFRESH_TOKEN",{refreshToken:""}),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()},signup:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function n(){var r,a,o,s,i,c,u,l,d,g;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.username,a=t.password,o=t.email,s=t.isSubscribed,n.prev=1,i={method:"POST",body:JSON.stringify({username:r,password:a,email:o,isSubscribed:s})},n.next=5,fetch(Object({NODE_ENV:"production",VUE_APP_VIDEO_API:"https://thawing-sea-83431.herokuapp.com/",VUE_APP_WEBPACK_TARGET:"node",BASE_URL:"/"}).VUE_APP_BACKEND_API+"/api/v1/auth/create-user",i);case 5:if(c=n.sent,c.ok){n.next=10;break}return console.log("Cannot signup!"),console.log(c),n.abrupt("return");case 10:return n.next=12,c.json();case 12:return u=n.sent,l=u.token,d=u.accessToken,g=u.refreshToken,n.next=18,z.addUser({username:r,token:l});case 18:e.commit("LOGIN",{username:r,accessToken:d}),e.commit("SET_REFRESH_TOKEN",{refreshToken:g}),e.commit("SET_COOKIE",{username:r,accessToken:d}),e.commit("SET_REFRESH_TOKEN_COOKIE",{refreshToken:g}),n.next=30;break;case 24:return n.prev=24,n.t0=n["catch"](1),console.log(n.t0),n.next=29,e.dispatch("logout");case 29:throw n.t0;case 30:case"end":return n.stop()}}),n,null,[[1,24]])})))()},loadUser:function(e){return Object(u["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,z.getUser();case 2:n=t.sent,n&&n!=={}&&e.commit("LOGIN",n);case 4:case"end":return t.stop()}}),t)})))()},updateAuthorizationIfNeeded:function(e){return Object(u["a"])(regeneratorRuntime.mark((function t(){var n,r,a,o,s,i,c,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=0,r=e.getters,""!==r.getAccessToken&&(a=Object(H["a"])(r.getAccessToken),n=1e3*a.exp),console.log(r.getCurrentUser),!(""===r.getAccessToken||Date.now()>n)){t.next=34;break}return t.prev=5,o={headers:{Authorization:"Bearer "+e.getters.getRefreshToken}},t.next=9,fetch(Object({NODE_ENV:"production",VUE_APP_VIDEO_API:"https://thawing-sea-83431.herokuapp.com/",VUE_APP_WEBPACK_TARGET:"node",BASE_URL:"/"}).VUE_APP_BACKEND_API+"/api/v1/auth/token",o);case 9:if(s=t.sent,s.ok){t.next=14;break}return console.log("Cannot get token!"),console.log(s),t.abrupt("return");case 14:return t.next=16,s.json();case 16:return i=t.sent,c=i.accessToken,u=i.refreshToken,e.commit("SET_ACCESS_TOKEN",{accessToken:c}),e.commit("SET_REFRESH_TOKEN",{refreshToken:u}),t.abrupt("return",s);case 24:if(t.prev=24,t.t0=t["catch"](5),console.log("updateAuthorizationIfNeeded"),console.log(t.t0),"Invalid res"!==t.t0.message){t.next=31;break}return t.next=31,e.dispatch("logout");case 31:throw t.t0;case 32:t.next=35;break;case 34:return t.abrupt("return",new Promise((function(e){e([])})));case 35:case"end":return t.stop()}}),t,null,[[5,24]])})))()}},q=F,J=(n("b64b"),n("d4ec")),W=n("bee2"),Q=(n("ac1f"),n("1276"),function(){function e(){Object(J["a"])(this,e)}return Object(W["a"])(e,null,[{key:"setCookie",value:function(e,t,n){var r="";if(n){var a=new Date;a.setTime(a.getTime()+24*n*60*60*1e3),r="; expires="+a.toUTCString()}document.cookie=e+"="+(t||"")+r+"; path=/"}},{key:"getCookie",value:function(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){var a=n[r];while(" "===a.charAt(0))a=a.substring(1,a.length);if(0===a.indexOf(t))return a.substring(t.length,a.length)}return null}},{key:"eraseCookie",value:function(e){document.cookie=e+"=; Max-Age=-99999999;"}}]),e}()),X=Q,Y={setUsername:function(e){e.username="otto"},LOGIN:function(e,t){var n=t.username,r=t.accessToken,a=t.refreshToken;console.log("login mutation"),console.log(e.user),e.user.loggedIn=!0,e.user.username=n,e.user.accessToken=r,e.user.id=Object(H["a"])(r).userId,e.user={id:Object(H["a"])(r).userId,username:"",loggedIn:!0,accessToken:r,refreshToken:a},console.log(e.user)},LOGOUT:function(e){e.user.loggedIn=!1,e.user.id="",e.user.username="",e.user.accessToken=""},SET_ACCESS_TOKEN:function(e,t){var n=t.accessToken;console.log("SET_ACCESS_TOKEN"),e.user.accessToken=n},SET_REFRESH_TOKEN:function(e,t){var n=t.refreshToken;console.log("SET_REFRESH_TOKEN"),e.user.refreshToken=n},SET_COOKIE:function(e,t){var n=t.username,r=t.accessToken;if(""!==r){var a=Object(H["a"])(r);X.setCookie("userId",a.userId,2)}X.setCookie("username",n,2),X.setCookie("accessToken",r,2)},SET_REFRESH_TOKEN_COOKIE:function(e,t){var n=t.refreshToken;X.setCookie("refreshToken",n,1100)},ERASE_COOKIE:function(e,t){for(var n=t.cookies,r=Object.keys(n),a=0,o=r;a<o.length;a++){var s=o[a];X.eraseCookie(n[s])}}},Z=Y,ee={username:function(e){return e.username},getCurrentUser:function(e){return e.user},isLoggedIn:function(e){return console.log(e.user),!!e.user&&e.user.loggedIn},getAccessToken:function(e){return e.user.accessToken},getRefreshToken:function(e){return e.user.refreshToken},getTokenHeader:function(e){return"Bearer "+e.user.accessToken}},te=ee,ne={username:"default",user:{id:"",username:"",loggedIn:!1,accessToken:"",refreshToken:""}},re={namespaced:!0,state:ne,mutations:Z,actions:q,getters:te},ae=(n("99af"),n("caad"),n("2532"),n("b0c0"),n("bc3a")),oe=n.n(ae),se={getElapsedString:function(e){var t=(Date.now()-Date.parse(e))/1e3;if(t=Math.round(t),t/60<1)return t+" секунд назад";if(t=Math.round(t/60),t/60<1)return t+" минут назад";if(t=Math.round(t/24),t/24<1)return t+" часов назад";var n=Math.round(t/7);if(n/7<1)return n+" недель назад";var r=Math.round(t/30);if(r/30<1)return r+" месяцев назад";var a=Math.round(t/365);return a/365<1?a+" лет назад":void 0},updateThumbnail:function(e,t){this[t].thumbnail=Object({NODE_ENV:"production",VUE_APP_VIDEO_API:"https://thawing-sea-83431.herokuapp.com/",VUE_APP_WEBPACK_TARGET:"node",BASE_URL:"/"}).VUE_APP_VIDEO_STREAMING_API+"/"+this[t].thumbnail}},ie=se,ce=function(e){e.response?(console.log(e.response.data),console.log(e.response.status),console.log(e.response.headers)):e.request?console.log(e.request):console.log("Error",e.message)},ue=ce;function le(e,t,n,r){return de.apply(this,arguments)}function de(){return de=Object(u["a"])(regeneratorRuntime.mark((function e(t,n,r,a){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=null!==a?{method:n,headers:{Authorization:t.rootGetters["authMod/getTokenHeader"]},body:JSON.stringify(a)}:{method:n,headers:{Authorization:t.rootGetters["authMod/getTokenHeader"]}},e.next=3,ge(t,r,o);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),de.apply(this,arguments)}function ge(e,t,n){return pe.apply(this,arguments)}function pe(){return pe=Object(u["a"])(regeneratorRuntime.mark((function e(t,n,r){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch(n,r);case 2:if(a=e.sent,a.ok){e.next=7;break}if(401!==a.status){e.next=7;break}return e.next=7,t.dispatch("authMod/updateAuthorizationIfNeeded",{},{root:!0});case 7:return e.abrupt("return",a.json());case 8:case"end":return e.stop()}}),e)}))),pe.apply(this,arguments)}var ve,he=ge,me=n("850d"),fe=n.n(me),be="https://thawing-sea-83431.herokuapp.com",we={getVideoById:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function n(){var r,a,o,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.videoId,n.prev=1,a=be+"/api/v1/videos/"+r,n.next=5,oe.a.get(a);case 5:if(o=n.sent,console.log(o),200===o.status){n.next=11;break}return console.log("failed get video by id"),console.log(o),n.abrupt("return");case 11:s=o.data,e.state.video=s,e.state.videoStatus=fe.a.intToStatus(s.status),e.state.video.uploaded=ie.getElapsedString(s.uploaded),n.next=20;break;case 17:n.prev=17,n.t0=n["catch"](1),ue(n.t0);case 20:case"end":return n.stop()}}),n,null,[[1,17]])})))()},newImages:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function n(){var r,a,o,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.path,a=t.eventId,n.prev=1,n.next=4,e.dispatch("authMod/updateAuthorizationIfNeeded",{},{root:!0});case 4:console.log(r,a),o={headers:{Authorization:e.rootGetters["authMod/getTokenHeader"]}},s=be+"/api/v1/picture/detectText/dropbox?path=".concat(r,"&eventId=").concat(a),console.log("upload video"+s),oe.a.post(s,null,o).then((function(e){return console.log(e)})).then((function(e){return console.log(e)})),n.next=14;break;case 11:n.prev=11,n.t0=n["catch"](1),e.state.isProcessing=!1;case 14:case"end":return n.stop()}}),n,null,[[1,11]])})))()},getVideoOnPage:function(e){var t=arguments;return Object(u["a"])(regeneratorRuntime.mark((function n(){var r,a,o,s,i,c,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.length>1&&void 0!==t[1]?t[1]:"1",a=t.length>2&&void 0!==t[2]?t[2]:"10",n.prev=2,o=be+"/api/v1/videos/?page="+r+"&countVideoOnPage="+a,console.log(o),n.next=7,oe.a.get(o);case 7:s=n.sent,console.log(s.data),i=s.data,c=i.pageCount,u=i.videos,Object.keys(s.data).includes("pageCount")&&(e.state.pageCount=c),Object.keys(s.data).includes("videos")&&e.commit("SET_VIDEOS",{videos:u}),n.next=17;break;case 14:n.prev=14,n.t0=n["catch"](2),ue(n.t0);case 17:case"end":return n.stop()}}),n,null,[[2,14]])})))()},createEvent:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function n(){var r,a,o,s,i,c,u,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.name,a=t.location,o=t.date,n.prev=1,n.next=4,e.dispatch("authMod/updateAuthorizationIfNeeded",{},{root:!0});case 4:return s=be+"/api/v1/events",i={method:"POST",headers:{Authorization:e.rootGetters["authMod/getTokenHeader"]},body:JSON.stringify({name:r,location:a,date:o})},n.next=8,he(e,s,i);case 8:c=n.sent,console.log(c),u=c.code,l=c.message,e.state.success=1===u,e.state.message=l,n.next=20;break;case 15:throw n.prev=15,n.t0=n["catch"](1),console.log(n.t0),e.state.success=!1,n.t0;case 20:case"end":return n.stop()}}),n,null,[[1,15]])})))()},deleteEventPermanent:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function n(){var r,a,o,s,i,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.eventId,n.prev=1,n.next=4,e.dispatch("authMod/updateAuthorizationIfNeeded",{},{root:!0});case 4:return a=be+"/api/v1/events/"+r,o={method:"DELETE",headers:{Authorization:e.rootGetters["authMod/getTokenHeader"]}},n.next=8,he(e,a,o);case 8:s=n.sent,console.log(s),i=s.code,c=s.message,e.state.success=i,e.state.message=c,n.next=20;break;case 15:throw n.prev=15,n.t0=n["catch"](1),console.log(n.t0),e.state.success=!1,n.t0;case 20:case"end":return n.stop()}}),n,null,[[1,15]])})))()},deleteImagePermanent:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function n(){var r,a,o,s,i,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.pictureId,n.prev=1,n.next=4,e.dispatch("authMod/updateAuthorizationIfNeeded",{},{root:!0});case 4:return a=be+"/api/v1/picture/"+r,o={method:"DELETE",headers:{Authorization:e.rootGetters["authMod/getTokenHeader"]}},n.next=8,he(e,a,o);case 8:s=n.sent,console.log(s),i=s.code,c=s.message,e.state.success=i,e.state.message=c,n.next=20;break;case 15:throw n.prev=15,n.t0=n["catch"](1),console.log(n.t0),e.state.success=!1,n.t0;case 20:case"end":return n.stop()}}),n,null,[[1,15]])})))()},findEvents:function(e){return Object(u["a"])(regeneratorRuntime.mark((function t(){var n,r,a,o,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,n=0,r=20,a=be+"/api/v1/events?offset="+n+"&limit="+r,o={headers:{"Content-Type":"video/mp4",Authorization:e.rootGetters["authMod/getTokenHeader"]}},t.next=7,e.dispatch("authMod/updateAuthorizationIfNeeded",{},{root:!0});case 7:return t.next=9,oe.a.get(a,o);case 9:return s=t.sent,i=s.data,console.log("response.data"),console.log(i),Object.keys(i).includes("data")&&(e.state.events=i.data),e.commit("SET_EVENTS",i.data),t.abrupt("return",i.data);case 18:t.prev=18,t.t0=t["catch"](0),ue(t.t0);case 21:case"end":return t.stop()}}),t,null,[[0,18]])})))()}},xe=we,ke={SET_EVENTS:function(e,t){var n=t.events;e.events=n}},Pe=ke,_e={eventId:null,isProcessing:!1,success:!1,message:!1,code:!1,error:!1,video:null,events:null,pageCount:0,url:{type:String,required:!1,default:"list"}},Ee={getEventId:function(e){return e.videoId},getIsProcessing:function(e){return e.isProcessing},getEvents:function(e){return e.events},getEvent:function(e){return e.video},getMessage:function(e){return e.message},getStatus:function(e){return e.success},getCode:function(e){return e.code}},Ie={namespaced:!0,state:_e,mutations:Pe,actions:xe,getters:Ee},Ce=(n("a4d3"),n("e01a"),n("159b"),{addUser:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function n(){var r,a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.username,n.prev=1,n.next=4,fetch(Object({NODE_ENV:"production",VUE_APP_VIDEO_API:"https://thawing-sea-83431.herokuapp.com/",VUE_APP_WEBPACK_TARGET:"node",BASE_URL:"/"}).VUE_APP_BACKEND_API+"/api/v1/users/"+r,{headers:{Authorization:e.rootGetters["authMod/getTokenHeader"]}});case 4:if(a=n.sent,a.ok){n.next=11;break}if(401===a.status){n.next=9;break}return console.log(a),n.abrupt("return");case 9:return n.next=11,e.dispatch("authMod/logout",{},{root:!0});case 11:o=a.json(),e.commit("ADD_USER",o),n.next=19;break;case 15:throw n.prev=15,n.t0=n["catch"](1),console.log(n.t0),n.t0;case 19:case"end":return n.stop()}}),n,null,[[1,15]])})))()},updateDescription:function(e,t){var n=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){var a,o,s,i,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=t.username,o=t.description,r.prev=1,r.next=4,e.dispatch("authMod/updateAuthorizationIfNeeded",{},{root:!0});case 4:return s={method:"PATCH",headers:{Authorization:e.rootGetters["authMod/getTokenHeader"],"Content-Type":"application/json"},body:JSON.stringify({username:a,description:o})},r.next=7,fetch(Object({NODE_ENV:"production",VUE_APP_VIDEO_API:"https://thawing-sea-83431.herokuapp.com/",VUE_APP_WEBPACK_TARGET:"node",BASE_URL:"/"}).VUE_APP_BACKEND_API+"/api/v1/users/"+a,s);case 7:if(i=r.sent,i.ok){r.next=14;break}if(401===i.status){r.next=12;break}return console.log(i),r.abrupt("return");case 12:return r.next=14,e.dispatch("authMod/logout",{},{root:!0});case 14:c=i.json(),n.state.videos=c.videos,n.state.countAllVideos=c.countAllVideos,console.log(c),e.commit("ADD_USER",c),r.next=25;break;case 21:throw r.prev=21,r.t0=r["catch"](1),console.log(r.t0),r.t0;case 25:case"end":return r.stop()}}),r,null,[[1,21]])})))()},getUserVideos:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function n(){var r,a,o,s,i,c,u,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.page,a=t.countVideoOnPage,n.prev=1,o=X.getCookie("userId"),s=Object({NODE_ENV:"production",VUE_APP_VIDEO_API:"https://thawing-sea-83431.herokuapp.com/",VUE_APP_WEBPACK_TARGET:"node",BASE_URL:"/"}).VUE_APP_BACKEND_API+"/api/v1/users/"+o+"/videos?page="+r+"&countVideoOnPage="+a,console.log(s),i={},n.next=8,he(e,s,i);case 8:c=n.sent,console.log("data"),console.log(c),u=c.videos,l=c.countAllVideos,e.state.userVideos=u,e.state.userVideos.forEach(ie.updateThumbnail,e.state.userVideos),e.state.countUserVideos=l,console.log("inner end"),n.next=23;break;case 18:throw n.prev=18,n.t0=n["catch"](1),console.log(n.t0),e.state.success=!1,n.t0;case 23:case"end":return n.stop()}}),n,null,[[1,18]])})))()},getUserLikedVideos:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function n(){var r,a,o,s,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.page,a=t.countVideoOnPage,n.prev=1,n.next=4,e.dispatch("authMod/updateAuthorizationIfNeeded",{},{root:!0});case 4:return o=Object({NODE_ENV:"production",VUE_APP_VIDEO_API:"https://thawing-sea-83431.herokuapp.com/",VUE_APP_WEBPACK_TARGET:"node",BASE_URL:"/"}).VUE_APP_BACKEND_API+"/api/v1/videos-liked?page="+r+"&countVideoOnPage="+a,console.log(o),s={method:"GET",headers:{Authorization:e.rootGetters["authMod/getTokenHeader"]}},n.next=9,he(e,o,s);case 9:i=n.sent,console.log("data"),console.log(i),e.state.userVideos=i,e.state.userVideos.forEach(ie.updateThumbnail,e.state.userVideos),console.log("inner end"),n.next=22;break;case 17:throw n.prev=17,n.t0=n["catch"](1),console.log(n.t0),e.state.success=!1,n.t0;case 22:case"end":return n.stop()}}),n,null,[[1,17]])})))()},subscribe:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function n(){var r,a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.followingToUserId,n.prev=1,n.next=4,e.dispatch("authMod/updateAuthorizationIfNeeded",{},{root:!0});case 4:return a=Object({NODE_ENV:"production",VUE_APP_VIDEO_API:"https://thawing-sea-83431.herokuapp.com/",VUE_APP_WEBPACK_TARGET:"node",BASE_URL:"/"}).VUE_APP_BACKEND_API+"/api/v1/users/".concat(X.getCookie("userId"),"/follow?followingToId=").concat(r),console.log(a),n.next=8,le(e,"POST",a,null);case 8:o=n.sent,console.log("data"),console.log(o),e.state.isSuccess=!0,console.log("inner end"),n.next=20;break;case 15:throw n.prev=15,n.t0=n["catch"](1),console.log(n.t0),e.state.isSuccess=!1,n.t0;case 20:case"end":return n.stop()}}),n,null,[[1,15]])})))()}}),Se=Ce,Oe=(n("7db0"),{getUser:function(e,t){return e.loadedUsers.some((function(e){return e.username===t}))?e.loadedUsers.find((function(e){return e.username===t})):{}},getUserVideos:function(e){return{videos:e.userVideos,countAllVideos:e.countUserVideos}},isSuccess:function(e){return e.isSuccess}}),Te=Oe,ye=(n("a434"),{ADD_USER:function(e,t){e.loadedUsers.some((function(e){return e.username===t.username}))&&e.loadedUsers.splice(e.loadedUsers.indexOf((function(e){return e.username===t.username})),1),e.loadedUsers.push(t)}}),Ae=ye,Re={loadedUsers:[],userVideos:null,countUserVideos:0,rtl:!1,isSuccess:!1,theme:{dark:!1,system:!1,mixed:!1}},Ve={namespaced:!0,state:Re,mutations:Ae,actions:Se,getters:Te},Ne=n("0e44"),je=n("a78e"),De={eventsMod:Ie,authMod:re,userMod:Ve},Ue=[Object(Ne["a"])({getState:function(e){return je["getJSON"](e)},setState:function(e,t){return je["set"](e,t,{expires:3,secure:!0})}})];function Me(e){e.use(x["a"])}function Le(){return null==ve&&void 0===ve&&(ve=new x["a"].Store({state:{},mutations:{},actions:{},modules:De,plugins:Ue})),ve}var Ge=n("8c4f"),Be=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.isShowGallery?n("div",{staticClass:"lightboxOverlay",staticStyle:{width:"100vw",height:"100vh"},attrs:{id:"lightboxOverlay",tabindex:"-1"},on:{click:function(t){e.isShowGallery=!1}}}):e._e(),n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"12",sm:"12",md:"6"}},[e.isLoggedUser?e._e():n("v-toolbar-title",{staticClass:"mr-6 float-left"},[n("router-link",{attrs:{to:{name:"home"}}},[n("span",{staticClass:"link  black--text"},[e._v("Home")])])],1),!1===e.isLoggedUser?n("v-toolbar-title",{staticClass:" float-left"},[n("router-link",{attrs:{to:{name:"login"}}},[n("span",{staticClass:"link black--text"},[e._v("Login")])])],1):e._e()],1),n("v-col",{staticClass:"top_tbl_cell search ",attrs:{cols:"12",sm:"12",md:"6"}},[n("v-form",{staticClass:"search_here",attrs:{id:"searchForm"},on:{submit:function(t){return t.preventDefault(),e.searchSubmit.apply(null,arguments)}}},[n("label",{staticClass:"search_label"},[n("v-text-field",{attrs:{filled:"",clearable:"",autocomplete:"off",label:"Participant number",type:"text"},model:{value:e.lastSearchQuery,callback:function(t){e.lastSearchQuery=t},expression:"lastSearchQuery"}}),n("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedConfident,expression:"selectedConfident"}],staticClass:"search_confidence",attrs:{id:"confidence",name:"confidence"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedConfident=t.target.multiple?n:n[0]}}},[n("option",[e._v("0")]),n("option",[e._v("5")]),n("option",[e._v("10")]),n("option",[e._v("15")]),n("option",[e._v("20")]),n("option",[e._v("25")]),n("option",[e._v("30")]),n("option",[e._v("35")]),n("option",[e._v("40")]),n("option",[e._v("45")]),n("option",[e._v("50")]),n("option",[e._v("55")]),n("option",[e._v("60")]),n("option",[e._v("65")]),n("option",[e._v("70")]),n("option",[e._v("75")]),n("option",[e._v("80")]),n("option",{attrs:{selected:"selected"}},[e._v("85")]),n("option",[e._v("90")]),n("option",[e._v("95")]),n("option",[e._v("100")])]),n("v-btn",{staticStyle:{position:"absolute",top:"12px",right:"0"},attrs:{text:""},on:{click:function(t){return e.searchSubmit()}}},[n("IconSearch")],1)],1)])],1)],1),n("v-row",{staticClass:"mb-5"},[Math.round(e.allImagesCount/e.limit)>0?n("v-col",{attrs:{cols:12}},[n("v-btn",{on:{click:function(t){return e.searchNext(!1)}}},[n("IconNavigatePrev")],1),n("v-btn",{staticClass:"disabled",on:{click:function(t){e.isShowPageSelection=!e.isShowPageSelection}}},[e._v("\n            "+e._s(e.offset/e.limit+1)+" of "+e._s(Math.round(e.allImagesCount/e.limit))+"\n          ")]),n("v-btn",{on:{click:function(t){return e.searchNext(!0)}}},[n("IconNavigateNext")],1),n("v-spacer")],1):e._e()],1)],1),n("v-container",[e.images.length>0?n("v-row",e._l(e.images,(function(t,r){return n("v-col",{key:t.PictureId,staticClass:"ma-0 mb-5 pa-1",attrs:{cols:12,xs:"12",sm:"6",md:"4",lg:"3",xl:"2"}},[n("v-img",{staticClass:"ma-auto grey pointer lighten-2",attrs:{src:t.Path,gradient:"to bottom, rgba(0,0,0,.1), rgba(0,0,0,.5)","max-height":"280","max-width":"280","aspect-ratio":"1"},on:{click:function(n){return e.openGallery(t,r)}},scopedSlots:e._u([{key:"placeholder",fn:function(){return[n("v-row",{staticClass:"fill-height ma-0",attrs:{align:"center",justify:"center"}},[n("v-progress-circular",{attrs:{indeterminate:"",color:"grey lighten-5"}})],1)]},proxy:!0}],null,!0)})],1)})),1):n("v-row",[n("p",[e._v("Not found")])])],1),e.isShowGallery?n("div",{staticClass:"lightbox__wrapper"},[n("button",{staticClass:"btn btn-sm lb-modal-close",attrs:{id:"lbClose"},on:{click:function(t){e.isShowGallery=!1}}},[n("div",[n("IconCloseSecond")],1)]),n("div",{staticClass:"lightbox",attrs:{id:"lightbox",tabindex:"-1"}},[n("div",{staticClass:"lb-outerContainer"},[n("div",{staticClass:"lb-container"},[n("img",{staticClass:"lb-image",attrs:{id:"lbImage",src:e.currentPath,alt:""}}),n("div",{staticClass:"lb-nav",staticStyle:{"pointer-events":"auto"}},[n("a",{staticClass:"lb-prev",attrs:{id:"lbPrev","aria-label":"Previous image"},on:{click:e.prevImg}},[n("span",{staticClass:"btn lb-modal-prev"},[n("IconNavigatePrev")],1)]),n("a",{staticClass:"lb-next",attrs:{id:"lbNext","aria-label":"Next image"},on:{click:e.nextImg}},[n("span",{staticClass:"btn  lb-modal-next"},[n("IconNavigateNext")],1)])]),e._m(0)])]),n("div",{staticClass:"lb-dataContainer",staticStyle:{width:"163px"}},[n("div",{staticClass:"lb-data"},[n("div",{staticClass:"lb-details"},[n("span",{staticClass:"lb-caption",staticStyle:{display:"none"}}),n("span",{staticClass:"lb-number",attrs:{id:"lbNumber"}},[e._v("Image "+e._s(e.currentImage+1)+" of "+e._s(e.images.length))])])])])])]):e._e(),n("p",{attrs:{id:"alert","data-page":"0"}})],1)},Ke=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"lb-loader",staticStyle:{opacity:"0.837437",display:"none"}},[n("a",{staticClass:"lb-cancel"})])}],ze=(n("5319"),"https://thawing-sea-83431.herokuapp.com"),He=ze,$e=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"}},[n("path",{attrs:{d:"M0 0h24v24H0V0z",fill:"none"}}),n("path",{attrs:{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}})])},Fe=[],qe={name:"IconSearch"},Je=qe,We=Object(f["a"])(Je,$e,Fe,!1,null,"e669d022",null),Qe=We.exports,Xe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"}},[n("path",{attrs:{d:"M0 0h24v24H0V0z",fill:"none"}}),n("path",{attrs:{d:"M10.02 6L8.61 7.41 13.19 12l-4.58 4.59L10.02 18l6-6-6-6z"}})])},Ye=[],Ze={name:"IconNavigateNext"},et=Ze,tt=Object(f["a"])(et,Xe,Ye,!1,null,"cf06d420",null),nt=tt.exports,rt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"}},[n("path",{attrs:{d:"M0 0h24v24H0V0z",fill:"none"}}),n("path",{attrs:{d:"M10.02 6L8.61 7.41 13.19 12l-4.58 4.59L10.02 18l6-6-6-6z"}})])},at=[],ot={name:"IconNavigatePrev"},st=ot,it=(n("b6ff"),Object(f["a"])(st,rt,at,!1,null,"e4fdaabc",null)),ct=it.exports,ut=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{staticClass:"_8-yf5 ",attrs:{"aria-label":"Close",fill:"#000",height:"24",role:"img",viewBox:"0 0 48 48",width:"24"}},[n("path",{attrs:{"clip-rule":"evenodd",d:"M41.8 9.8L27.5 24l14.2 14.2c.6.6.6 1.5 0 2.1l-1.4 1.4c-.6.6-1.5.6-2.1 0L24 27.5 9.8 41.8c-.6.6-1.5.6-2.1 0l-1.4-1.4c-.6-.6-.6-1.5 0-2.1L20.5 24 6.2 9.8c-.6-.6-.6-1.5 0-2.1l1.4-1.4c.6-.6 1.5-.6 2.1 0L24 20.5 38.3 6.2c.6-.6 1.5-.6 2.1 0l1.4 1.4c.6.6.6 1.6 0 2.2z","fill-rule":"evenodd"}})])},lt=[],dt={name:"IconCloseSecond"},gt=dt,pt=Object(f["a"])(gt,ut,lt,!1,null,"3cdb9dca",null),vt=pt.exports,ht={name:"Home",components:{IconCloseSecond:vt,IconNavigatePrev:ct,IconNavigateNext:nt,IconSearch:Qe},data:function(){return{images:[],page:{limit:20,offset:0},limit:20,offset:0,allImagesCount:0,lastSearchQuery:"",selectedConfident:85,currentImage:-1,currentPath:"",isShowGallery:!1,confidence:85,query:""}},computed:{isLoggedUser:function(){return this.isLogged()}},mounted:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={limit:20,offset:0},t.next=3,e.searchImages(He,{q:"",confidence:e.selectedConfident,limit:n.limit,offset:n.offset});case 3:if(r=t.sent,r.hasOwnProperty("Pictures")){t.next=6;break}return t.abrupt("return");case 6:console.log("response"),console.log(r),e.images=r.Pictures,e.images.forEach((function(e){return e.Path=e.Path.replace("-preview","-thumb"),e})),e.allImagesCount=r.CountAllItems;case 11:case"end":return t.stop()}}),t)})))()},methods:Object(c["a"])(Object(c["a"])(Object(c["a"])({},Object(x["b"])({logout:"authMod/logout"})),Object(x["c"])({isLogged:"authMod/isLoggedIn",getUser:"authMod/getCurrentUser",getCurrentUser:"authMod/getCurrentUser"})),{},{addImagesListener:function(){for(var e=this,t=document.getElementById("results"),n=function(n){var r=t.children[n];r.addEventListener("click",(function(){e.isShowGallery=!0,e.openGallery(e,n,r,t)}))},r=0;r<=t.childElementCount-1;r++)n(r)},prevImg:function(){this.currentImage<1&&(this.currentImage=this.images.length),this.currentImage--,this.currentPath=this.images[this.currentImage].Path.replace("-thumb","-preview")},nextImg:function(){this.currentImage>=this.images.length-1&&(this.currentImage=-1),this.currentImage++,this.currentPath=this.images[this.currentImage].Path.replace("-thumb","-preview")},openGallery:function(e,t){this.isShowGallery=!0,this.currentImage=t,this.currentPath=e.Path.replace("-thumb","-preview")},searchSubmit:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.preventDefault(),t.offset=0,n.prev=2,n.next=5,t.searchNext();case 5:console.log(t.images),n.next=11;break;case 8:n.prev=8,n.t0=n["catch"](2),console.log("error",n.t0);case 11:case"end":return n.stop()}}),n,null,[[2,8]])})))()},searchNext:function(){var e=arguments,t=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){var r,a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.length>0&&void 0!==e[0]&&e[0],r?t.offset+=t.limit:t.offset>=t.limit&&(t.offset-=t.limit),a={q:t.lastSearchQuery,confidence:t.selectedConfident,limit:t.limit,offset:t.offset},n.next=5,t.searchImages(He,a);case 5:o=n.sent,t.images=o.Pictures,t.images.forEach((function(e){return e.Path=e.Path.replace("-preview","-thumb"),e})),t.allImagesCount=o.CountAllItems;case 9:case"end":return n.stop()}}),n)})))()},searchImages:function(e){var t=arguments;return Object(u["a"])(regeneratorRuntime.mark((function n(){var r,a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.length>1&&void 0!==t[1]?t[1]:{},n.prev=1,a="".concat(e,"/api/v1/picture/search?"),r.hasOwnProperty("q")&&(a+="number=".concat(r.q)),r.hasOwnProperty("confidence")&&(r.hasOwnProperty("q")&&(a+="&"),a+="confidence=".concat(r.confidence)),r.hasOwnProperty("eventId")&&(a+="&eventId=".concat(r.eventId)),r.hasOwnProperty("limit")&&(a+="&limit=".concat(r.limit)),r.hasOwnProperty("offset")&&(a+="&offset=".concat(r.offset)),n.next=10,fetch(a);case 10:if(o=n.sent,o.ok){n.next=13;break}return n.abrupt("return",[]);case 13:return n.next=15,o.json();case 15:return n.abrupt("return",n.sent);case 18:return n.prev=18,n.t0=n["catch"](1),console.log("error",n.t0),n.abrupt("return",[]);case 22:case"end":return n.stop()}}),n,null,[[1,18]])})))()}})},mt=ht,ft=(n("4205"),n("8336")),bt=n("4bd4"),wt=n("adda"),xt=n("490a"),kt=n("2fa4"),Pt=n("8654"),_t=Object(f["a"])(mt,Be,Ke,!1,null,"a9501140",null),Et=_t.exports;E()(_t,{VBtn:ft["a"],VCol:S["a"],VContainer:O["a"],VForm:bt["a"],VImg:wt["a"],VProgressCircular:xt["a"],VRow:y["a"],VSpacer:kt["a"],VTextField:Pt["a"],VToolbarTitle:A["a"]});var It=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-row",{staticClass:"margin-bottom-20"},[n("v-col",{attrs:{sm:"8",md:"6","offset-md":"3"}},[n("v-card",{on:{submit:function(e){e.preventDefault()}}},[n("v-card-text",[n("v-text-field",{attrs:{label:"Username","hide-details":"auto"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),e.loginSelected?e._e():n("v-card-text",[n("v-text-field",{attrs:{label:"Путь dropbox папки","hide-details":"auto"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),e.loginSelected?e._e():n("v-card-text"),n("v-card-text",[n("v-text-field",{attrs:{label:"Password","hide-details":"auto"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),n("v-card-actions",[n("v-btn",{on:{click:e.onLoginButtonClick}},[e._v(e._s(e.buttonString))])],1)],1)],1)],1),e.error?n("p",[e._v(e._s(e.error))]):e._e()],1)},Ct=[],St={name:"LoginPage",components:{},data:function(){return{loginSelected:!0,username:"",password:"",email:"",isSubscribed:!1,error:""}},methods:Object(c["a"])(Object(c["a"])({},Object(x["b"])({login:"authMod/login",signup:"authMod/signup"})),{},{toggleLogin:function(){this.loginSelected=!this.loginSelected},onLoginButtonClick:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!e.loginSelected){t.next=6;break}return t.next=4,e.login({username:e.username,password:e.password});case 4:t.next=8;break;case 6:return t.next=8,e.signup({username:e.username,password:e.password,email:e.email,isSubscribed:e.isSubscribed});case 8:return t.next=10,e.$router.push({name:"home"});case 10:t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](0),e.error=t.t0;case 15:case"end":return t.stop()}}),t,null,[[0,12]])})))()}}),computed:{buttonString:function(){return this.loginSelected?"LOGIN":"SIGNUP"},textLoginString:function(){return this.loginSelected?"Signup instead":"Login instead"}}},Ot=St,Tt=(n("8f76"),n("b0af")),yt=n("99d9"),At=Object(f["a"])(Ot,It,Ct,!1,null,"435c64e5",null),Rt=At.exports;E()(At,{VBtn:ft["a"],VCard:Tt["a"],VCardActions:yt["a"],VCardText:yt["b"],VCol:S["a"],VContainer:O["a"],VRow:y["a"],VTextField:Pt["a"]});var Vt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-container",[e.isShowGallery?n("v-row",[n("button",{staticClass:"btn btn-outline-danger btn-sm lb-modal-close",on:{click:e.closeGallery}},[n("IconClose")],1),n("div",{staticClass:"lightbox",staticStyle:{top:"10px",left:"0"},attrs:{tabindex:"-1"}},[n("div",{staticClass:"lb-outerContainer"},[n("div",{staticClass:"lb-container"},[n("img",{staticClass:"lb-image",attrs:{src:e.picturePath,alt:""}}),n("div",{staticClass:"lb-nav",staticStyle:{"pointer-events":"auto"}},[n("a",{staticClass:"lb-prev",attrs:{"aria-label":"Previous image"},on:{click:e.prevImage}},[n("span",{staticClass:"btn lb-modal-prev"},[n("IconNavigatePrev")],1)]),n("a",{staticClass:"lb-next",attrs:{"aria-label":"Next image"},on:{click:e.nextImage}},[n("span",{staticClass:"btn  lb-modal-next"},[n("IconNavigateNext"),e._v(">")],1)])]),n("div",{staticClass:"lb-loader",staticStyle:{opacity:"0.837437",display:"none"}},[n("a",{staticClass:"lb-cancel"})])])]),n("div",{staticClass:"lb-dataContainer",staticStyle:{width:"163px"}},[n("div",{staticClass:"lb-data"},[n("div",{staticClass:"lb-details"},[n("span",{staticClass:"lb-caption",staticStyle:{display:"none"}}),n("span",{staticClass:"lb-number"},[e._v("Image "+e._s(e.currentImage+1)+" of "+e._s(e.images.length))])])])])]),n("div",{staticClass:"lightboxOverlay",staticStyle:{width:"100vw",height:"9167vh"},attrs:{tabindex:"-1"},on:{click:function(t){e.isShowGallery=!1}}})]):e._e()],1),n("v-container",[n("v-row",{staticClass:"mb-10"},[n("v-btn",{staticClass:"btn",on:{click:e.openNewEventPopup}},[e._v("Создать событие")]),n("v-btn",{staticClass:"btn",on:{click:e.openNewImagePopup}},[e._v("Добавить изображения")]),e.picturesToDelete.length>0?n("v-btn",{staticClass:"btn",attrs:{depressed:"",color:"error"},on:{click:function(t){return e.onDeleteEvent(-1,"picture")}}},[e._v("\n        Delete selected images\n      ")]):e._e()],1),e.picturesToDelete.length>0?n("v-row",[n("div",[e._v("Selected images:")]),e.picturesToDelete.length>0?n("div",e._l(e.picturesToDelete,(function(t){return n("div",[e._v("\n          "+e._s(t)+"\n        ")])})),0):e._e()]):e._e(),null!==e.events?n("v-row",[n("v-simple-table",{scopedSlots:e._u([{key:"default",fn:function(){return[n("thead",[n("tr",[n("th",{staticClass:"text-left"},[e._v("\n              Name\n            ")]),n("th",{staticClass:"text-left"},[e._v("\n              Location\n            ")]),n("th",{staticClass:"text-left"},[e._v("\n              Action\n            ")])])]),n("tbody",e._l(e.events,(function(t){return n("tr",{key:t.Id},[n("td",[e._v(e._s(t.Name))]),n("td",[e._v(e._s(t.Location))]),n("td",[n("button",{staticClass:"btn",on:{click:function(n){return e.onDeleteEvent(t.Id)}}},[n("IconDelete")],1),n("button",{staticClass:"btn",on:{click:function(n){return e.searchEventImage(t.Id)}}},[n("IconSearch")],1)])])})),0)]},proxy:!0}],null,!1,611241862)})],1):e._e()],1),n("v-container",[n("v-row",[n("div",{staticClass:"text-center"},[n("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.approveToDeleteEventPermanent,callback:function(t){e.approveToDeleteEventPermanent=t},expression:"approveToDeleteEventPermanent"}},[n("v-card",[n("v-card-title",{staticClass:"text-h5"},[e._v("Are you sure you want to delete?")]),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeDeleteEvent}},[e._v("Cancel")]),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.approvedDeleteEvent}},[e._v("OK")]),n("v-spacer")],1)],1)],1)],1)]),n("v-row",[n("div",{staticClass:"text-center"},[n("v-dialog",{attrs:{width:"500"},model:{value:e.newEventPopup,callback:function(t){e.newEventPopup=t},expression:"newEventPopup"}},[n("v-card",[n("v-card-title",{staticClass:"text-h5 grey lighten-2"},[e._v("\n              Новые событие\n            ")]),n("v-divider"),n("v-card-text",[n("v-text-field",{attrs:{autofocus:"",label:"Название",rules:e.rules,"hide-details":"auto",color:"grey darken-3"},model:{value:e.eventName,callback:function(t){e.eventName=t},expression:"eventName"}})],1),n("v-card-text",[n("v-text-field",{attrs:{rules:e.rules,label:"Локация",color:"grey darken-3"},model:{value:e.eventLocation,callback:function(t){e.eventLocation=t},expression:"eventLocation"}})],1),n("v-card-text",[n("v-date-picker",{staticClass:"mt-4",attrs:{color:"grey darken-2",min:"1980-06-15",max:"2100-03-20"},model:{value:e.eventDate,callback:function(t){e.eventDate=t},expression:"eventDate"}})],1),n("v-divider"),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{text:""},on:{click:function(t){e.newEventPopup=!1}}},[n("IconClose")],1),n("v-btn",{staticClass:"btn",attrs:{text:""},on:{click:e.submitNewEvent}},[e._v("Сохранить\n              ")])],1)],1)],1)],1),n("div",{staticClass:"text-center"},[n("v-dialog",{attrs:{width:"500"},model:{value:e.newImageToProcessingPopup,callback:function(t){e.newImageToProcessingPopup=t},expression:"newImageToProcessingPopup"}},[n("v-card",[n("v-card-title",{staticClass:"text-h5 grey lighten-2"},[e._v("\n              Новые изображения\n            ")]),n("v-divider"),n("v-card-text",[n("v-text-field",{attrs:{autofocus:"",label:"Путь dropbox папки",rules:e.path,hint:"/images","hide-details":"auto",color:"grey darken-3"},model:{value:e.dropboxPath,callback:function(t){e.dropboxPath=t},expression:"dropboxPath"}})],1),n("v-card-text",[n("v-select",{attrs:{items:e.options,label:"event",color:"grey darken-3"},on:{input:function(t){return e.setEventId(e.eventId)}},model:{value:e.eventId,callback:function(t){e.eventId=t},expression:"eventId"}}),n("td",[e._v(e._s(e.eventId))])],1),n("v-divider"),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{text:""},on:{click:function(t){e.newImageToProcessingPopup=!1}}},[n("IconClose")],1),n("v-btn",{staticClass:"btn",attrs:{text:""},on:{click:e.submitNewImages}},[e._v("\n                Отправить\n              ")])],1)],1)],1)],1)])],1),e.isShow?n("v-container",[e.images.length>0?n("v-row",[e.countPages>0?n("v-col",{attrs:{cols:12}},[n("v-select",{attrs:{items:e.pages,label:"Rows per page"},model:{value:e.limit,callback:function(t){e.limit=t},expression:"limit"}}),n("v-text-field",{attrs:{type:"number",label:"Confidence",min:0,max:100},model:{value:e.confidence,callback:function(t){e.confidence=t},expression:"confidence"}}),n("v-btn",{on:{click:function(t){return e.searchEventImage(e.eventId)}}},[n("IconSearch")],1)],1):e._e()],1):e._e(),e.images.length>0?n("v-row",[e.countPages>0?n("v-col",{staticClass:"ma-auto",attrs:{cols:12}},[n("v-btn",{on:{click:e.previousPage}},[n("IconNavigatePrev")],1),n("v-btn",{staticClass:"disabled",on:{click:function(t){e.isShowPageSelection=!e.isShowPageSelection}}},[e._v("\n          "+e._s(e.imagePage+1)+" of "+e._s(e.countPages)+"\n        ")]),n("v-btn",{on:{click:e.nextPage}},[n("IconNavigateNext")],1),e.isShowPageSelection?n("div",{staticClass:"mt-4"},[n("v-form",{on:{submit:function(t){return t.preventDefault(),e.goToPage.apply(null,arguments)}}},[n("v-text-field",{staticClass:"shrink mx-4",attrs:{autofocus:"",min:1,max:e.countPages,filled:"",rounded:"",dense:"","single-line":"",placeholder:"Page","append-icon":"mdi-magnify",type:"number"},model:{value:e.selectedPage,callback:function(t){e.selectedPage=t},expression:"selectedPage"}}),n("v-btn",{staticClass:"disabled",attrs:{type:"submit"},on:{click:e.goToPage}},[e._v("\n              Go To Page\n            ")])],1)],1):e._e()],1):e._e()],1):e._e(),e.images.length>0?n("v-row",e._l(e.images,(function(t,r){return n("v-col",{key:t.PictureId,staticClass:"ma-0 mb-5 pa-0",attrs:{cols:12,xs:"12",sm:"6",md:"4",lg:"3"}},[n("v-img",{staticClass:"ma-auto grey pointer lighten-2",attrs:{src:t.Path,gradient:"to bottom, rgba(0,0,0,.1), rgba(0,0,0,.5)","max-height":"280","max-width":"280","aspect-ratio":"1"},on:{click:function(n){return e.openGallery(t,r)}},scopedSlots:e._u([{key:"placeholder",fn:function(){return[n("v-row",{staticClass:"fill-height ma-0",attrs:{align:"center",justify:"center"}},[n("v-progress-circular",{attrs:{indeterminate:"",color:"grey lighten-5"}})],1)]},proxy:!0}],null,!0)}),n("v-card-actions",{staticClass:"card-actions"},[n("v-btn",{on:{click:function(n){return e.onDeleteEvent(t.PictureId,"picture")}}},[n("IconDelete")],1),n("v-btn",[n("label",{attrs:{for:"jack"}},[e._v("Add To Delete\n              "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.picturesToDelete,expression:"picturesToDelete"}],attrs:{type:"checkbox",id:"jack"},domProps:{value:t.PictureId,checked:Array.isArray(e.picturesToDelete)?e._i(e.picturesToDelete,t.PictureId)>-1:e.picturesToDelete},on:{change:function(n){var r=e.picturesToDelete,a=n.target,o=!!a.checked;if(Array.isArray(r)){var s=t.PictureId,i=e._i(r,s);a.checked?i<0&&(e.picturesToDelete=r.concat([s])):i>-1&&(e.picturesToDelete=r.slice(0,i).concat(r.slice(i+1)))}else e.picturesToDelete=o}}})])])],1)],1)})),1):n("v-row",[n("p",[e._v("Not found")])])],1):e._e()],1)},Nt=[],jt=n("b85c"),Dt=(n("25eb"),n("a9e3"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"}},[n("path",{attrs:{d:"M0 0h24v24H0V0z",fill:"none"}}),n("path",{attrs:{d:"M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z"}})])}),Ut=[],Mt={name:"IconDelete"},Lt=Mt,Gt=Object(f["a"])(Lt,Dt,Ut,!1,null,"5882be04",null),Bt=Gt.exports,Kt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"}},[n("path",{attrs:{d:"M0 0h24v24H0V0z",fill:"none"}}),n("path",{attrs:{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}})])},zt=[],Ht={name:"IconClose"},$t=Ht,Ft=Object(f["a"])($t,Kt,zt,!1,null,"c7fda18a",null),qt=Ft.exports,Jt={name:"Playlist",components:{IconClose:qt,IconNavigateNext:nt,IconNavigatePrev:ct,IconDelete:Bt,IconSearch:Qe},data:function(){return{events:null,picturesToDelete:[],images:null,isShow:!1,imagePage:0,selectedPage:1,pages:[10,15,20,40],isShowPageSelection:!1,limit:20,confidence:0,countPages:null,status:null,approveToDeleteEventPermanent:!1,newImageToProcessingPopup:!1,isShowGallery:!1,newEventPopup:!1,deleteEventId:null,action:null,eventId:null,eventName:null,eventDate:null,eventLocation:null,dropboxPath:"/",picturePath:"",currentImage:-1,rules:[function(e){return!!e||"Required."},function(e){return e&&e.length>=3||"Min 3 characters"}],path:[function(e){return!!e||"Required."},function(e){return e&&e.length>=2&&"/"===e[0]||"Min 2 characters"}]}},created:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchEvents();case 2:case"end":return t.stop()}}),t)})))()},mounted:function(){var e=this;document.addEventListener("keydown",(function(t){var n=t.code;console.log(" ".concat(n)),e.isShowGallery?"ArrowRight"===n?e.nextImage(t):"ArrowLeft"===n?e.prevImage(t):"Escape"===n&&(e.isShowGallery=!1):"KeyS"!==n||e.newImageToProcessingPopup||e.newEventPopup?"KeyE"!==n||e.newEventPopup||e.newImageToProcessingPopup||(e.newEventPopup=!0):e.newImageToProcessingPopup=!0,!e.isShow||e.isShowGallery||e.newEventPopup||e.newImageToProcessingPopup||("ArrowRight"===n?e.nextPage():"ArrowLeft"===n?e.previousPage():"KeyP"===n&&(e.isShowPageSelection=!e.isShowPageSelection))}))},computed:{options:function(){if(null!==this.events){var e=[];return this.events.forEach((function(t){e.push(t.Id+" "+t.Name)})),e}return[]}},methods:Object(c["a"])(Object(c["a"])(Object(c["a"])({},Object(x["b"])({findEvents:"eventsMod/findEvents",createNewEvent:"eventsMod/createEvent",newImagesToRekognition:"eventsMod/newImages",deleteEvent:"eventsMod/deleteEventPermanent",deletePicture:"eventsMod/deleteImagePermanent"})),Object(x["c"])({getStatus:"eventsMod/getStatus",getMessage:"eventsMod/getMessage",getEvents:"eventsMod/getEvents"})),{},{fetchEvents:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.findEvents();case 2:n=t.sent,console.log("data"),console.log(n),e.events=n;case 6:case"end":return t.stop()}}),t)})))()},goToPage:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isShowPageSelection){t.next=11;break}if(!(e.selectedPage<1||e.selectedPage>e.countPages)){t.next=4;break}return p(!1,"Valid page range [1, ".concat(e.countPages,"]")),t.abrupt("return");case 4:return console.log("this.selectedPage"),console.log(e.selectedPage),t.next=8,e.searchEventImages(e.eventId,Number.parseInt(e.selectedPage)-1);case 8:e.isShowPageSelection=!1,t.next=12;break;case 11:e.isShowPageSelection=!0;case 12:case"end":return t.stop()}}),t)})))()},onDeleteEvent:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"event";console.log("eventId"),console.log(e),this.deleteEventId=e,this.action=t,this.approveToDeleteEventPermanent=!0},closeDeleteEvent:function(){this.approveToDeleteEventPermanent=!1},approvedDeleteEvent:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var n,r,a,o,s,i,c,u,l,d,g,v,h;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.action,console.log("eventId"),e.approveToDeleteEventPermanent=!1,r=e.deleteEventId,console.log(r),"event"!==n){t.next=10;break}return t.next=8,e.deleteEvent({eventId:r});case 8:t.next=15;break;case 10:if("picture"!==n){t.next=15;break}return-1!==r&&(e.picturesToDelete=[r]),console.log(JSON.stringify(e.picturesToDelete)),t.next=15,e.deletePicture({pictures:e.picturesToDelete});case 15:if(a=1===e.getStatus(),a)if(o=0,s=[],"event"===n){for(;o<e.events.length;o++)i=e.events[o],i.Id!==r&&s.push(i);e.events=s}else if("picture"===n){if(-1!==r)for(;o<e.images.length;o++)c=e.images[o],c.PictureId!==r&&s.push(c);else{u=Object(jt["a"])(e.images);try{for(u.s();!(l=u.n()).done;){d=l.value,g=Object(jt["a"])(e.picturesToDelete);try{for(g.s();!(v=g.n()).done;)h=v.value,d.PictureId!==h&&s.push(d)}catch(m){g.e(m)}finally{g.f()}}}catch(m){u.e(m)}finally{u.f()}}e.picturesToDelete=[],e.images=s}e.deleteEventId=null,p(a,e.getMessage());case 19:case"end":return t.stop()}}),t)})))()},openNewEventPopup:function(){this.newEventPopup=!0},openGallery:function(e,t){this.isShowGallery=!0,this.picturePath=e.Path.replace("-thumb","-preview"),this.currentImage=t},closeGallery:function(){this.isShowGallery=!1},nextImage:function(e){e.preventDefault(),this.currentImage>=this.images.length-1&&(this.currentImage=-1),this.currentImage++,console.log(this.currentImage);var t=this.images[this.currentImage].Path.replace("-thumb","-preview");console.log(t),this.picturePath=t},prevImage:function(e){e.preventDefault(),this.currentImage<=0&&(this.currentImage=this.images.length),this.currentImage--,this.picturePath=this.images[this.currentImage].Path.replace("-thumb","-preview")},submitNewEvent:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var n,r,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.newEventPopup=!1,null!==e.eventName&&null!==e.eventLocation&&null!==e.eventDate){t.next=4;break}return p(a,"invalid event name or event location"),t.abrupt("return");case 4:if(n=!e.rules[1](e.eventName),r=null!==e.eventLocation&&!e.rules[1](e.eventLocation),!n&&!r){t.next=9;break}return p(a,"invalid event name or event location"),t.abrupt("return");case 9:return console.log(e.eventName),console.log(e.eventDate),console.log(e.eventLocation),t.next=14,e.createNewEvent({name:e.eventName,location:e.eventLocation,date:e.eventDate});case 14:a=e.getStatus(),o=e.getMessage(),a&&e.events.push({Id:Number.parseInt(o.substring(o.lastIndexOf(" "))),Name:e.eventName,Date:e.eventDate,Location:e.eventLocation}),p(a,o);case 18:case"end":return t.stop()}}),t)})))()},openNewImagePopup:function(){this.newImageToProcessingPopup=!0},submitNewImages:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(null!==e.dropboxPath&&null!==e.eventId){t.next=3;break}return p(!1,"Invalid "),t.abrupt("return");case 3:if(e.path[1](e.dropboxPath)){t.next=6;break}return p(!1,"invalid event name or event location"),t.abrupt("return");case 6:return t.prev=6,t.next=9,e.newImagesToRekognition({path:e.dropboxPath,eventId:e.eventId});case 9:e.newImageToProcessingPopup=!1,n=e.getStatus(),p(n,n?"Отправлено на обработку":e.getMessage()),t.next=18;break;case 14:t.prev=14,t.t0=t["catch"](6),console.log(t.t0),p(!1,t.t0);case 18:case"end":return t.stop()}}),t,null,[[6,14]])})))()},setEventId:function(e){console.log(e),this.eventId=Number.parseInt(e.substring(0,e.indexOf(" ")))},searchEventImage:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.searchEventImages(e);case 2:case"end":return n.stop()}}),n)})))()},searchEventImages:function(e){var t=arguments,n=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){var a,o,s,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=t.length>1&&void 0!==t[1]?t[1]:0,n.isShow=!0,n.eventId=e,n.imagePage=a,console.log("this.limit"),console.log(n.limit),r.next=8,oe.a.get("".concat(He,"/api/v1/picture/search?eventId=").concat(e,"&offset=").concat(n.imagePage*n.limit,"&limit=").concat(n.limit,"&confidence=").concat(n.confidence));case 8:o=r.sent,s=o.data,i=Math.ceil(s.CountAllItems/n.limit),console.log(i),n.countPages=i,n.images=s.Pictures,n.images.forEach((function(e){return e.Path=e.Path.replace("-preview","-thumb"),e})),console.log(n.images);case 16:case"end":return r.stop()}}),r)})))()},previousPage:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log(e.imagePage),!(e.imagePage>0)){t.next=5;break}return e.imagePage--,t.next=5,e.searchEventImages(e.eventId,e.imagePage);case 5:case"end":return t.stop()}}),t)})))()},nextPage:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log(e.imagePage),!(e.imagePage<e.countPages-1)){t.next=5;break}return e.imagePage++,t.next=5,e.searchEventImages(e.eventId,e.imagePage);case 5:case"end":return t.stop()}}),t)})))()}})},Wt=Jt,Qt=(n("3450"),n("2e4b")),Xt=n("169a"),Yt=n("ce7e"),Zt=n("b974"),en=n("1f4f"),tn=Object(f["a"])(Wt,Vt,Nt,!1,null,"4bcfb51e",null),nn=tn.exports;function rn(e){return{home:{name:"home",path:"/",component:Et},admin:{name:"admin",path:"/admin",component:nn,beforeEnter:function(t,n,r){e.getters["authMod/isLoggedIn"]?r():r({name:"login"})}},login:{name:"login",path:"/login",component:Rt,beforeEnter:function(t,n,r){e.getters["authMod/isLoggedIn"]?r({name:"uploadVideo"}):r()}}}}function an(e){e.use(Ge["a"])}E()(tn,{VBtn:ft["a"],VCard:Tt["a"],VCardActions:yt["a"],VCardText:yt["b"],VCardTitle:yt["c"],VCol:S["a"],VContainer:O["a"],VDatePicker:Qt["a"],VDialog:Xt["a"],VDivider:Yt["a"],VForm:bt["a"],VImg:wt["a"],VProgressCircular:xt["a"],VRow:y["a"],VSelect:Zt["a"],VSimpleTable:en["a"],VSpacer:kt["a"],VTextField:Pt["a"]});var on=function(){var e,t=function(e){return new Ge["a"]({mode:"history",routes:[rn(e).home,rn(e).login,rn(e).admin]})};return{getInstance:function(n){return e||(e=t(n))}}}(),sn=on;function cn(e){Me(e),an(e)}n("ed18").config(),r["a"].config.productionTip=!1,cn(r["a"]);var un=Le(),ln=sn.getInstance(un);new r["a"]({router:ln,store:un,vuetify:G,render:function(e){return e(U)}}).$mount("#app")},"850d":function(e,t){},"867e":function(e,t,n){},"8f76":function(e,t,n){"use strict";n("867e")},a52e:function(e,t,n){"use strict";n("087b")},b5c6:function(e,t,n){"use strict";n("2e64")},b6ff:function(e,t,n){"use strict";n("226e")},e3ff:function(e,t,n){}});
//# sourceMappingURL=app.affbcbee.js.map
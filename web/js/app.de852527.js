(function(e){function t(t){for(var r,s,i=t[0],c=t[1],u=t[2],d=0,p=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&p.push(a[s][0]),a[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);l&&l(t);while(p.length)p.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,i=1;i<n.length;i++){var c=n[i];0!==a[c]&&(r=!1)}r&&(o.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},a={app:0},o=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var l=c;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";n("1530")},1530:function(e,t,n){},"46e0":function(e,t,n){},4916:function(e,t,n){"use strict";n("5d16")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("layout")},o=[],s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("v-card",{staticClass:"mx-auto overflow-hidden",attrs:{width:"100%",height:"100%"}},[!0===e.isLoggedUser?n("v-container",[n("v-row",[n("v-col",{attrs:{cols:12}},[n("v-app-bar",{attrs:{color:"deep-purple",dark:""}},[n("v-toolbar-title",{staticClass:"mr-16"},[n("router-link",{attrs:{to:{name:"home"}}},[e._v("\n                  Каталог\n                ")])],1),n("v-toolbar-title",{staticClass:"float-right"},[!1===e.isLoggedUser?n("div",[n("router-link",{attrs:{to:{name:"login"}}},[e._v("login")])],1):n("div",[n("span",{on:{click:function(t){return e.logoutUser()}}},[e._v("logout")])])]),n("v-toolbar-title",{staticClass:"float-right"},[!0===e.isLoggedUser?n("div",[n("router-link",{staticClass:"subtitle-2",attrs:{to:{name:"admin"}}},[n("span",{staticClass:"subtitle-2"},[e._v("Admin")])])],1):e._e()])],1)],1)],1)],1):e._e(),n("v-main",[n("Alert"),n("router-view")],1)],1)],1)},i=[],c=n("5530"),u=n("1da1"),l=(n("96cf"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"alert-popup hide",attrs:{id:"alert"}})}),d=[],p=new r["a"];function g(e,t){p.$emit("events",{type:"events",success:e,message:t})}var v={name:"Alert"},m=function(e){var t=document.getElementById("alert");t.innerText=e.message,t.classList.remove("hide"),setTimeout((function(){t.classList.add("hide")}),2500)};p.$on("events",m);var h=v,f=(n("4916"),n("2877")),_=Object(f["a"])(h,l,d,!1,null,"078594b2",null),b=_.exports,E=n("2f62"),P={name:"LayoutDefault",components:{Alert:b},created:function(){return Object(u["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},data:function(){return{drawer:!1,userid:{type:String,default:""},playlists:null}},methods:Object(c["a"])(Object(c["a"])(Object(c["a"])({},Object(E["b"])({logout:"authMod/logout"})),Object(E["c"])({isLogged:"authMod/isLoggedIn",getUser:"authMod/getCurrentUser",getCurrentUser:"authMod/getCurrentUser"})),{},{logoutUser:function(){this.logout(),this.isLoggedUser()}}),computed:{user:function(){return this.getUser(this.userid)},currentUsername:function(){var e=this.getCurrentUser();return e.username},isLoggedUser:function(){return this.isLogged()}}},x=P,w=(n("d849"),n("6544")),A=n.n(w),k=n("7496"),I=n("40dc"),O=n("b0af"),V=n("62ad"),T=n("a523"),C=n("f6c4"),R=n("0fd9"),U=n("2a7f"),S=Object(f["a"])(x,s,i,!1,null,"0d7c64e9",null),j=S.exports;A()(S,{VApp:k["a"],VAppBar:I["a"],VCard:O["a"],VCol:V["a"],VContainer:T["a"],VMain:C["a"],VRow:R["a"],VToolbarTitle:U["a"]});var y={name:"App",components:{Layout:j},data:function(){return{items:[{title:"Click Me"},{title:"Click Me"},{title:"Click Me"},{title:"Click Me 2"}]}}},N=y,D=(n("034f"),Object(f["a"])(N,a,o,!1,null,null,null)),M=D.exports,L=n("f309");r["a"].use(L["a"]);var B,K=new L["a"]({}),G=(n("d3b7"),"authDB"),H=1,z={getDb:function(){return Object(u["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){if(B)return e(B);var t=window.indexedDB.open(G,H);t.onerror=function(e){console.log(e),Promise.reject(new Error("Error"))},t.onsuccess=function(t){B=t.target.result,e(B)},t.onupgradeneeded=function(e){var t=e.target.result;t.createObjectStore("userAuth",{autoIncrement:!0,keyPath:"username"})}})));case 1:case"end":return e.stop()}}),e)})))()},addUser:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.getDb();case 2:return r=n.sent,n.abrupt("return",new Promise((function(t){var n=r.transaction(["userAuth"],"readwrite");n.oncomplete=function(){t()};var a=n.objectStore("userAuth");a.openCursor().onsuccess=function(t){var n=t.target.result;n&&(n.value.username!==e.username&&a.delete(n.value.username),n.continue())},a.put(e)})));case 4:case"end":return n.stop()}}),n)})))()},removeUser:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e&&e.username){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,t.getDb();case 4:return r=n.sent,n.abrupt("return",new Promise((function(t){var n=r.transaction(["userAuth"],"readwrite");n.oncomplete=function(){t()};var a=n.objectStore("userAuth");a.delete(e.username)})));case 6:case"end":return n.stop()}}),n)})))()},getUser:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getDb();case 2:return n=t.sent,t.abrupt("return",new Promise((function(e){var t=n.transaction(["userAuth"],"readwrite");t.oncomplete=function(){e(r)};var r=null,a=t.objectStore("userAuth");a.openCursor().onsuccess=function(e){var t=e.target.result;t&&(r=t.value)}})));case 4:case"end":return t.stop()}}),t)})))()}},F=n("1232"),W={login:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function n(){var r,a,o,s,i,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.username,a=t.password,n.prev=1,e.commit("setUsername"),console.log(e.getters.username),n.next=6,fetch(Object({NODE_ENV:"production",VUE_APP_VIDEO_API:"https://evening-atoll-24533.herokuapp.com/",VUE_APP_WEBPACK_TARGET:"node",BASE_URL:"/"}).VUE_APP_BACKEND_API+"/api/v1/auth/login",{method:"POST",body:JSON.stringify({username:r,password:a})});case 6:if(o=n.sent,o.ok){n.next=11;break}return console.log("Cannot login!"),console.log(o),n.abrupt("return");case 11:return n.next=13,o.json();case 13:return s=n.sent,console.log(s),i=s.accessToken,c=s.refreshToken,n.next=18,z.addUser({username:r,password:a});case 18:e.commit("LOGIN",{username:r,accessToken:i,refreshToken:c}),console.log("context.state.user after login"),console.log(e.state.user),e.commit("SET_COOKIE",{username:r,accessToken:i,refreshToken:c}),e.commit("SET_REFRESH_TOKEN_COOKIE",{refreshToken:c}),n.next=28;break;case 25:n.prev=25,n.t0=n["catch"](1),console.log(n.t0);case 28:case"end":return n.stop()}}),n,null,[[1,25]])})))()},logout:function(e){return Object(u["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,n={username:e.getters.getCurrentUser.username},t.next=4,z.removeUser(n);case 4:console.log("logout"),e.commit("SET_ACCESS_TOKEN",{accessToken:""}),e.commit("LOGOUT"),e.commit("ERASE_COOKIE",{cookies:["username","accessToken"]}),e.commit("SET_REFRESH_TOKEN",{refreshToken:""}),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()},signup:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function n(){var r,a,o,s,i,c,u,l,d,p;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.username,a=t.password,o=t.email,s=t.isSubscribed,n.prev=1,i={method:"POST",body:JSON.stringify({username:r,password:a,email:o,isSubscribed:s})},n.next=5,fetch(Object({NODE_ENV:"production",VUE_APP_VIDEO_API:"https://evening-atoll-24533.herokuapp.com/",VUE_APP_WEBPACK_TARGET:"node",BASE_URL:"/"}).VUE_APP_BACKEND_API+"/api/v1/auth/create-user",i);case 5:if(c=n.sent,c.ok){n.next=10;break}return console.log("Cannot signup!"),console.log(c),n.abrupt("return");case 10:return n.next=12,c.json();case 12:return u=n.sent,l=u.token,d=u.accessToken,p=u.refreshToken,n.next=18,z.addUser({username:r,token:l});case 18:e.commit("LOGIN",{username:r,accessToken:d}),e.commit("SET_REFRESH_TOKEN",{refreshToken:p}),e.commit("SET_COOKIE",{username:r,accessToken:d}),e.commit("SET_REFRESH_TOKEN_COOKIE",{refreshToken:p}),n.next=30;break;case 24:return n.prev=24,n.t0=n["catch"](1),console.log(n.t0),n.next=29,e.dispatch("logout");case 29:throw n.t0;case 30:case"end":return n.stop()}}),n,null,[[1,24]])})))()},loadUser:function(e){return Object(u["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,z.getUser();case 2:n=t.sent,n&&n!=={}&&e.commit("LOGIN",n);case 4:case"end":return t.stop()}}),t)})))()},updateAuthorizationIfNeeded:function(e){return Object(u["a"])(regeneratorRuntime.mark((function t(){var n,r,a,o,s,i,c,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=0,r=e.getters,""!==r.getAccessToken&&(a=Object(F["a"])(r.getAccessToken),n=1e3*a.exp),console.log(r.getCurrentUser),!(""===r.getAccessToken||Date.now()>n)){t.next=34;break}return t.prev=5,o={headers:{Authorization:"Bearer "+e.getters.getRefreshToken}},t.next=9,fetch(Object({NODE_ENV:"production",VUE_APP_VIDEO_API:"https://evening-atoll-24533.herokuapp.com/",VUE_APP_WEBPACK_TARGET:"node",BASE_URL:"/"}).VUE_APP_BACKEND_API+"/api/v1/auth/token",o);case 9:if(s=t.sent,s.ok){t.next=14;break}return console.log("Cannot get token!"),console.log(s),t.abrupt("return");case 14:return t.next=16,s.json();case 16:return i=t.sent,c=i.accessToken,u=i.refreshToken,e.commit("SET_ACCESS_TOKEN",{accessToken:c}),e.commit("SET_REFRESH_TOKEN",{refreshToken:u}),t.abrupt("return",s);case 24:if(t.prev=24,t.t0=t["catch"](5),console.log("updateAuthorizationIfNeeded"),console.log(t.t0),"Invalid res"!==t.t0.message){t.next=31;break}return t.next=31,e.dispatch("logout");case 31:throw t.t0;case 32:t.next=35;break;case 34:return t.abrupt("return",new Promise((function(e){e([])})));case 35:case"end":return t.stop()}}),t,null,[[5,24]])})))()}},$=W,q=(n("b64b"),n("d4ec")),J=n("bee2"),Q=(n("ac1f"),n("1276"),function(){function e(){Object(q["a"])(this,e)}return Object(J["a"])(e,null,[{key:"setCookie",value:function(e,t,n){var r="";if(n){var a=new Date;a.setTime(a.getTime()+24*n*60*60*1e3),r="; expires="+a.toUTCString()}document.cookie=e+"="+(t||"")+r+"; path=/"}},{key:"getCookie",value:function(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){var a=n[r];while(" "===a.charAt(0))a=a.substring(1,a.length);if(0===a.indexOf(t))return a.substring(t.length,a.length)}return null}},{key:"eraseCookie",value:function(e){document.cookie=e+"=; Max-Age=-99999999;"}}]),e}()),Y=Q,X={setUsername:function(e){e.username="otto"},LOGIN:function(e,t){var n=t.username,r=t.accessToken,a=t.refreshToken;console.log("login mutation"),console.log(e.user),e.user.loggedIn=!0,e.user.username=n,e.user.accessToken=r,e.user.id=Object(F["a"])(r).userId,e.user={id:Object(F["a"])(r).userId,username:"",loggedIn:!0,accessToken:r,refreshToken:a},console.log(e.user)},LOGOUT:function(e){e.user.loggedIn=!1,e.user.id="",e.user.username="",e.user.accessToken=""},SET_ACCESS_TOKEN:function(e,t){var n=t.accessToken;console.log("SET_ACCESS_TOKEN"),e.user.accessToken=n},SET_REFRESH_TOKEN:function(e,t){var n=t.refreshToken;console.log("SET_REFRESH_TOKEN"),e.user.refreshToken=n},SET_COOKIE:function(e,t){var n=t.username,r=t.accessToken;if(""!==r){var a=Object(F["a"])(r);Y.setCookie("userId",a.userId,2)}Y.setCookie("username",n,2),Y.setCookie("accessToken",r,2)},SET_REFRESH_TOKEN_COOKIE:function(e,t){var n=t.refreshToken;Y.setCookie("refreshToken",n,1100)},ERASE_COOKIE:function(e,t){for(var n=t.cookies,r=Object.keys(n),a=0,o=r;a<o.length;a++){var s=o[a];Y.eraseCookie(n[s])}}},Z=X,ee={username:function(e){return e.username},getCurrentUser:function(e){return e.user},isLoggedIn:function(e){return console.log(e.user),!!e.user&&e.user.loggedIn},getAccessToken:function(e){return e.user.accessToken},getRefreshToken:function(e){return e.user.refreshToken},getTokenHeader:function(e){return"Bearer "+e.user.accessToken}},te=ee,ne={username:"default",user:{id:"",username:"",loggedIn:!1,accessToken:"",refreshToken:""}},re={namespaced:!0,state:ne,mutations:Z,actions:$,getters:te},ae=(n("99af"),n("caad"),n("2532"),n("b0c0"),n("bc3a")),oe=n.n(ae),se={getElapsedString:function(e){var t=(Date.now()-Date.parse(e))/1e3;if(t=Math.round(t),t/60<1)return t+" секунд назад";if(t=Math.round(t/60),t/60<1)return t+" минут назад";if(t=Math.round(t/24),t/24<1)return t+" часов назад";var n=Math.round(t/7);if(n/7<1)return n+" недель назад";var r=Math.round(t/30);if(r/30<1)return r+" месяцев назад";var a=Math.round(t/365);return a/365<1?a+" лет назад":void 0},updateThumbnail:function(e,t){this[t].thumbnail=Object({NODE_ENV:"production",VUE_APP_VIDEO_API:"https://evening-atoll-24533.herokuapp.com/",VUE_APP_WEBPACK_TARGET:"node",BASE_URL:"/"}).VUE_APP_VIDEO_STREAMING_API+"/"+this[t].thumbnail}},ie=se,ce=function(e){e.response?(console.log(e.response.data),console.log(e.response.status),console.log(e.response.headers)):e.request?console.log(e.request):console.log("Error",e.message)},ue=ce;function le(e,t,n,r){return de.apply(this,arguments)}function de(){return de=Object(u["a"])(regeneratorRuntime.mark((function e(t,n,r,a){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=null!==a?{method:n,headers:{Authorization:t.rootGetters["authMod/getTokenHeader"]},body:JSON.stringify(a)}:{method:n,headers:{Authorization:t.rootGetters["authMod/getTokenHeader"]}},e.next=3,pe(t,r,o);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),de.apply(this,arguments)}function pe(e,t,n){return ge.apply(this,arguments)}function ge(){return ge=Object(u["a"])(regeneratorRuntime.mark((function e(t,n,r){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch(n,r);case 2:if(a=e.sent,a.ok){e.next=7;break}if(401!==a.status){e.next=7;break}return e.next=7,t.dispatch("authMod/updateAuthorizationIfNeeded",{},{root:!0});case 7:return e.abrupt("return",a.json());case 8:case"end":return e.stop()}}),e)}))),ge.apply(this,arguments)}var ve,me=pe,he=n("850d"),fe=n.n(he),_e={getVideoById:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function n(){var r,a,o,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.videoId,n.prev=1,a=Object({NODE_ENV:"production",VUE_APP_VIDEO_API:"https://evening-atoll-24533.herokuapp.com/",VUE_APP_WEBPACK_TARGET:"node",BASE_URL:"/"}).VUE_APP_BACKEND_API+"/api/v1/videos/"+r,n.next=5,oe.a.get(a);case 5:if(o=n.sent,console.log(o),200===o.status){n.next=11;break}return console.log("failed get video by id"),console.log(o),n.abrupt("return");case 11:s=o.data,e.state.video=s,e.state.videoStatus=fe.a.intToStatus(s.status),e.state.video.uploaded=ie.getElapsedString(s.uploaded),n.next=20;break;case 17:n.prev=17,n.t0=n["catch"](1),ue(n.t0);case 20:case"end":return n.stop()}}),n,null,[[1,17]])})))()},newImages:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function n(){var r,a,o,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.path,a=t.eventId,n.prev=1,n.next=4,e.dispatch("authMod/updateAuthorizationIfNeeded",{},{root:!0});case 4:console.log(r,a),o={headers:{Authorization:e.rootGetters["authMod/getTokenHeader"]}},s=Object({NODE_ENV:"production",VUE_APP_VIDEO_API:"https://evening-atoll-24533.herokuapp.com/",VUE_APP_WEBPACK_TARGET:"node",BASE_URL:"/"}).VUE_APP_BACKEND_API+"/api/v1/picture/detectText/dropbox?path=".concat(r,"&eventId=").concat(a),console.log("upload video"+s),oe.a.post(s,null,o).then((function(e){return console.log(e)})).then((function(e){return console.log(e)})),n.next=14;break;case 11:n.prev=11,n.t0=n["catch"](1),e.state.isProcessing=!1;case 14:case"end":return n.stop()}}),n,null,[[1,11]])})))()},getVideoOnPage:function(e){var t=arguments;return Object(u["a"])(regeneratorRuntime.mark((function n(){var r,a,o,s,i,c,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.length>1&&void 0!==t[1]?t[1]:"1",a=t.length>2&&void 0!==t[2]?t[2]:"10",n.prev=2,o=Object({NODE_ENV:"production",VUE_APP_VIDEO_API:"https://evening-atoll-24533.herokuapp.com/",VUE_APP_WEBPACK_TARGET:"node",BASE_URL:"/"}).VUE_APP_BACKEND_API+"/api/v1/videos/?page="+r+"&countVideoOnPage="+a,console.log(o),n.next=7,oe.a.get(o);case 7:s=n.sent,console.log(s.data),i=s.data,c=i.pageCount,u=i.videos,Object.keys(s.data).includes("pageCount")&&(e.state.pageCount=c),Object.keys(s.data).includes("videos")&&e.commit("SET_VIDEOS",{videos:u}),n.next=17;break;case 14:n.prev=14,n.t0=n["catch"](2),ue(n.t0);case 17:case"end":return n.stop()}}),n,null,[[2,14]])})))()},createEvent:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function n(){var r,a,o,s,i,c,u,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.name,a=t.location,o=t.date,n.prev=1,n.next=4,e.dispatch("authMod/updateAuthorizationIfNeeded",{},{root:!0});case 4:return s=Object({NODE_ENV:"production",VUE_APP_VIDEO_API:"https://evening-atoll-24533.herokuapp.com/",VUE_APP_WEBPACK_TARGET:"node",BASE_URL:"/"}).VUE_APP_BACKEND_API+"/api/v1/events",i={method:"POST",headers:{Authorization:e.rootGetters["authMod/getTokenHeader"]},body:JSON.stringify({name:r,location:a,date:o})},n.next=8,me(e,s,i);case 8:c=n.sent,console.log(c),u=c.code,l=c.message,e.state.success=1===u,e.state.message=l,n.next=20;break;case 15:throw n.prev=15,n.t0=n["catch"](1),console.log(n.t0),e.state.success=!1,n.t0;case 20:case"end":return n.stop()}}),n,null,[[1,15]])})))()},deleteEventPermanent:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function n(){var r,a,o,s,i,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.eventId,n.prev=1,n.next=4,e.dispatch("authMod/updateAuthorizationIfNeeded",{},{root:!0});case 4:return a=Object({NODE_ENV:"production",VUE_APP_VIDEO_API:"https://evening-atoll-24533.herokuapp.com/",VUE_APP_WEBPACK_TARGET:"node",BASE_URL:"/"}).VUE_APP_BACKEND_API+"/api/v1/events/"+r,o={method:"DELETE",headers:{Authorization:e.rootGetters["authMod/getTokenHeader"]}},n.next=8,me(e,a,o);case 8:s=n.sent,console.log(s),i=s.code,c=s.message,e.state.success=i,e.state.message=c,n.next=20;break;case 15:throw n.prev=15,n.t0=n["catch"](1),console.log(n.t0),e.state.success=!1,n.t0;case 20:case"end":return n.stop()}}),n,null,[[1,15]])})))()},deleteImagePermanent:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function n(){var r,a,o,s,i,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.pictureId,n.prev=1,n.next=4,e.dispatch("authMod/updateAuthorizationIfNeeded",{},{root:!0});case 4:return a=Object({NODE_ENV:"production",VUE_APP_VIDEO_API:"https://evening-atoll-24533.herokuapp.com/",VUE_APP_WEBPACK_TARGET:"node",BASE_URL:"/"}).VUE_APP_BACKEND_API+"/api/v1/picture/"+r,o={method:"DELETE",headers:{Authorization:e.rootGetters["authMod/getTokenHeader"]}},n.next=8,me(e,a,o);case 8:s=n.sent,console.log(s),i=s.code,c=s.message,e.state.success=i,e.state.message=c,n.next=20;break;case 15:throw n.prev=15,n.t0=n["catch"](1),console.log(n.t0),e.state.success=!1,n.t0;case 20:case"end":return n.stop()}}),n,null,[[1,15]])})))()},findEvents:function(e){return Object(u["a"])(regeneratorRuntime.mark((function t(){var n,r,a,o,s,i,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,n=Object({NODE_ENV:"production",VUE_APP_VIDEO_API:"https://evening-atoll-24533.herokuapp.com/",VUE_APP_WEBPACK_TARGET:"node",BASE_URL:"/"}).VUE_APP_BACKEND_API,r=0,a=20,o=n+"/api/v1/events?offset="+r+"&limit="+a,s={headers:{"Content-Type":"video/mp4",Authorization:e.rootGetters["authMod/getTokenHeader"]}},t.next=8,e.dispatch("authMod/updateAuthorizationIfNeeded",{},{root:!0});case 8:return t.next=10,oe.a.get(o,s);case 10:return i=t.sent,c=i.data,console.log("response.data"),console.log(c),Object.keys(c).includes("data")&&(e.state.events=c.data),e.commit("SET_EVENTS",c.data),t.abrupt("return",c.data);case 19:t.prev=19,t.t0=t["catch"](0),ue(t.t0);case 22:case"end":return t.stop()}}),t,null,[[0,19]])})))()}},be=_e,Ee={SET_EVENTS:function(e,t){var n=t.events;e.events=n}},Pe=Ee,xe={eventId:null,isProcessing:!1,success:!1,message:!1,code:!1,error:!1,video:null,events:null,pageCount:0,url:{type:String,required:!1,default:"list"}},we={getEventId:function(e){return e.videoId},getIsProcessing:function(e){return e.isProcessing},getEvents:function(e){return e.events},getEvent:function(e){return e.video},getMessage:function(e){return e.message},getStatus:function(e){return e.success},getCode:function(e){return e.code}},Ae={namespaced:!0,state:xe,mutations:Pe,actions:be,getters:we},ke=(n("a4d3"),n("e01a"),n("159b"),{addUser:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function n(){var r,a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.username,n.prev=1,n.next=4,fetch(Object({NODE_ENV:"production",VUE_APP_VIDEO_API:"https://evening-atoll-24533.herokuapp.com/",VUE_APP_WEBPACK_TARGET:"node",BASE_URL:"/"}).VUE_APP_BACKEND_API+"/api/v1/users/"+r,{headers:{Authorization:e.rootGetters["authMod/getTokenHeader"]}});case 4:if(a=n.sent,a.ok){n.next=11;break}if(401===a.status){n.next=9;break}return console.log(a),n.abrupt("return");case 9:return n.next=11,e.dispatch("authMod/logout",{},{root:!0});case 11:o=a.json(),e.commit("ADD_USER",o),n.next=19;break;case 15:throw n.prev=15,n.t0=n["catch"](1),console.log(n.t0),n.t0;case 19:case"end":return n.stop()}}),n,null,[[1,15]])})))()},updateDescription:function(e,t){var n=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){var a,o,s,i,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=t.username,o=t.description,r.prev=1,r.next=4,e.dispatch("authMod/updateAuthorizationIfNeeded",{},{root:!0});case 4:return s={method:"PATCH",headers:{Authorization:e.rootGetters["authMod/getTokenHeader"],"Content-Type":"application/json"},body:JSON.stringify({username:a,description:o})},r.next=7,fetch(Object({NODE_ENV:"production",VUE_APP_VIDEO_API:"https://evening-atoll-24533.herokuapp.com/",VUE_APP_WEBPACK_TARGET:"node",BASE_URL:"/"}).VUE_APP_BACKEND_API+"/api/v1/users/"+a,s);case 7:if(i=r.sent,i.ok){r.next=14;break}if(401===i.status){r.next=12;break}return console.log(i),r.abrupt("return");case 12:return r.next=14,e.dispatch("authMod/logout",{},{root:!0});case 14:c=i.json(),n.state.videos=c.videos,n.state.countAllVideos=c.countAllVideos,console.log(c),e.commit("ADD_USER",c),r.next=25;break;case 21:throw r.prev=21,r.t0=r["catch"](1),console.log(r.t0),r.t0;case 25:case"end":return r.stop()}}),r,null,[[1,21]])})))()},getUserVideos:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function n(){var r,a,o,s,i,c,u,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.page,a=t.countVideoOnPage,n.prev=1,o=Y.getCookie("userId"),s=Object({NODE_ENV:"production",VUE_APP_VIDEO_API:"https://evening-atoll-24533.herokuapp.com/",VUE_APP_WEBPACK_TARGET:"node",BASE_URL:"/"}).VUE_APP_BACKEND_API+"/api/v1/users/"+o+"/videos?page="+r+"&countVideoOnPage="+a,console.log(s),i={},n.next=8,me(e,s,i);case 8:c=n.sent,console.log("data"),console.log(c),u=c.videos,l=c.countAllVideos,e.state.userVideos=u,e.state.userVideos.forEach(ie.updateThumbnail,e.state.userVideos),e.state.countUserVideos=l,console.log("inner end"),n.next=23;break;case 18:throw n.prev=18,n.t0=n["catch"](1),console.log(n.t0),e.state.success=!1,n.t0;case 23:case"end":return n.stop()}}),n,null,[[1,18]])})))()},getUserLikedVideos:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function n(){var r,a,o,s,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.page,a=t.countVideoOnPage,n.prev=1,n.next=4,e.dispatch("authMod/updateAuthorizationIfNeeded",{},{root:!0});case 4:return o=Object({NODE_ENV:"production",VUE_APP_VIDEO_API:"https://evening-atoll-24533.herokuapp.com/",VUE_APP_WEBPACK_TARGET:"node",BASE_URL:"/"}).VUE_APP_BACKEND_API+"/api/v1/videos-liked?page="+r+"&countVideoOnPage="+a,console.log(o),s={method:"GET",headers:{Authorization:e.rootGetters["authMod/getTokenHeader"]}},n.next=9,me(e,o,s);case 9:i=n.sent,console.log("data"),console.log(i),e.state.userVideos=i,e.state.userVideos.forEach(ie.updateThumbnail,e.state.userVideos),console.log("inner end"),n.next=22;break;case 17:throw n.prev=17,n.t0=n["catch"](1),console.log(n.t0),e.state.success=!1,n.t0;case 22:case"end":return n.stop()}}),n,null,[[1,17]])})))()},subscribe:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function n(){var r,a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.followingToUserId,n.prev=1,n.next=4,e.dispatch("authMod/updateAuthorizationIfNeeded",{},{root:!0});case 4:return a=Object({NODE_ENV:"production",VUE_APP_VIDEO_API:"https://evening-atoll-24533.herokuapp.com/",VUE_APP_WEBPACK_TARGET:"node",BASE_URL:"/"}).VUE_APP_BACKEND_API+"/api/v1/users/".concat(Y.getCookie("userId"),"/follow?followingToId=").concat(r),console.log(a),n.next=8,le(e,"POST",a,null);case 8:o=n.sent,console.log("data"),console.log(o),e.state.isSuccess=!0,console.log("inner end"),n.next=20;break;case 15:throw n.prev=15,n.t0=n["catch"](1),console.log(n.t0),e.state.isSuccess=!1,n.t0;case 20:case"end":return n.stop()}}),n,null,[[1,15]])})))()}}),Ie=ke,Oe=(n("7db0"),{getUser:function(e,t){return e.loadedUsers.some((function(e){return e.username===t}))?e.loadedUsers.find((function(e){return e.username===t})):{}},getUserVideos:function(e){return{videos:e.userVideos,countAllVideos:e.countUserVideos}},isSuccess:function(e){return e.isSuccess}}),Ve=Oe,Te=(n("a434"),{ADD_USER:function(e,t){e.loadedUsers.some((function(e){return e.username===t.username}))&&e.loadedUsers.splice(e.loadedUsers.indexOf((function(e){return e.username===t.username})),1),e.loadedUsers.push(t)}}),Ce=Te,Re={loadedUsers:[],userVideos:null,countUserVideos:0,rtl:!1,isSuccess:!1,theme:{dark:!1,system:!1,mixed:!1}},Ue={namespaced:!0,state:Re,mutations:Ce,actions:Ie,getters:Ve},Se=(n("5319"),{createPlaylist:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function n(){var r,a,o,s,i,c,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.name,a=t.privacy,o=t.videos,n.prev=1,n.next=4,e.dispatch("authMod/updateAuthorizationIfNeeded",{},{root:!0});case 4:return s=Object({NODE_ENV:"production",VUE_APP_VIDEO_API:"https://evening-atoll-24533.herokuapp.com/",VUE_APP_WEBPACK_TARGET:"node",BASE_URL:"/"}).VUE_APP_BACKEND_API+"/api/v1/playlists",console.log(s),i={name:r,privacy:a,videos:o},n.next=9,le(e,"POST",s,i);case 9:c=n.sent,console.log("data"),console.log(c),e.state.message=c.message,e.state.success=c.success,console.log("inner end"),n.next=24;break;case 17:n.prev=17,n.t0=n["catch"](1),console.log("error"),console.log(n.t0.data),u=n.t0.response.data,e.state.message=u.message,e.state.success=u.success;case 24:case"end":return n.stop()}}),n,null,[[1,17]])})))()},modifyPlaylist:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function n(){var r,a,o,s,i,c,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.action,a=t.playlistId,o=t.videos,n.prev=1,n.next=4,e.dispatch("authMod/updateAuthorizationIfNeeded",{},{root:!0});case 4:return s=Object({NODE_ENV:"production",VUE_APP_VIDEO_API:"https://evening-atoll-24533.herokuapp.com/",VUE_APP_WEBPACK_TARGET:"node",BASE_URL:"/"}).VUE_APP_BACKEND_API+"/api/v1/playlists/"+a+"/modify",console.log(s),i={act:r,videos:o},n.next=9,le(e,"PUT",s,i);case 9:c=n.sent,e.state.error=c,console.log("inner end"),e.state.message=c.message,e.state.success=c.success,n.next=23;break;case 16:n.prev=16,n.t0=n["catch"](1),console.log("error"),console.log(n.t0),u=n.t0.response.data,e.state.message=u.message,e.state.success=u.success;case 23:case"end":return n.stop()}}),n,null,[[1,16]])})))()},getUserPlaylists:function(e){return Object(u["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.dispatch("authMod/updateAuthorizationIfNeeded",{},{root:!0});case 3:return n=Y.getCookie("userId"),r=Object({NODE_ENV:"production",VUE_APP_VIDEO_API:"https://evening-atoll-24533.herokuapp.com/",VUE_APP_WEBPACK_TARGET:"node",BASE_URL:"/"}).VUE_APP_BACKEND_API+"/api/v1/playlists?ownerId="+n,console.log(r),a={method:"GET",headers:{Authorization:e.rootGetters["authMod/getTokenHeader"]}},t.next=9,me(e,r,a);case 9:e.state.playlists=t.sent,t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](0),e.state.error=t.t0;case 15:case"end":return t.stop()}}),t,null,[[0,12]])})))()},getPlaylist:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function n(){var r,a,o,s,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.playlistId,n.prev=1,n.next=4,e.dispatch("authMod/updateAuthorizationIfNeeded",{},{root:!0});case 4:return a=Object({NODE_ENV:"production",VUE_APP_VIDEO_API:"https://evening-atoll-24533.herokuapp.com/",VUE_APP_WEBPACK_TARGET:"node",BASE_URL:"/"}).VUE_APP_BACKEND_API+"/api/v1/playlists/"+r,console.log(a),o={method:"GET",headers:{Authorization:e.rootGetters["authMod/getTokenHeader"]}},n.next=9,me(e,a,o);case 9:s=n.sent,i=s,i.videos=JSON.parse(s.videos.replace(/\\/g,"")),i.videos.forEach((function(e){e.thumbnail=Object({NODE_ENV:"production",VUE_APP_VIDEO_API:"https://evening-atoll-24533.herokuapp.com/",VUE_APP_WEBPACK_TARGET:"node",BASE_URL:"/"}).VUE_APP_BACKEND_API+"/content/"+e.id+"/screen.jpg"})),console.log(i),e.state.playlist=i,console.log(e.state.playlist),n.next=21;break;case 18:n.prev=18,n.t0=n["catch"](1),e.state.error=n.t0;case 21:case"end":return n.stop()}}),n,null,[[1,18]])})))()}}),je=Se,ye={},Ne=ye,De={playlist:null,playlists:null,success:null,message:null,error:null},Me={getPlaylists:function(e){return e.playlists},getPlaylist:function(e){return e.playlist},getError:function(e){return e.error},getSuccess:function(e){return e.success},getResponseMessage:function(e){return e.message}},Le={namespaced:!0,state:De,mutations:Ne,actions:je,getters:Me},Be=n("0e44"),Ke=n("a78e"),Ge={eventsMod:Ae,authMod:re,userMod:Ue,playlistMod:Le},He=[Object(Be["a"])({getState:function(e){return Ke["getJSON"](e)},setState:function(e,t){return Ke["set"](e,t,{expires:3,secure:!0})}})];function ze(e){e.use(E["a"])}function Fe(){return null==ve&&void 0===ve&&(ve=new E["a"].Store({state:{},mutations:{},actions:{},modules:Ge,plugins:He})),ve}var We=n("8c4f"),$e=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{attrs:{id:"wrap"}},[n("div",{staticClass:"wrap"},[n("div",{staticClass:"top_tbl"},[e._m(0),n("div",{staticClass:"top_tbl_cell search"},[n("form",{staticClass:"search_here",attrs:{id:"searchForm"},on:{submit:function(t){return t.preventDefault(),e.searchSubmit.apply(null,arguments)}}},[n("input",{staticClass:"search_input",attrs:{id:"searchInput",type:"text",placeholder:"Search by photos",autofocus:"autofocus",maxlength:"50"}}),e._m(1),n("button",{staticClass:"search_btn",attrs:{type:"submit"},on:{submit:function(t){return e.searchSubmit()}}},[n("img",{attrs:{src:"images/icon-search.png",alt:""}})])])])]),!1===e.isLoggedUser?n("div",[n("router-link",{attrs:{to:{name:"login"}}},[e._v("login")])],1):e._e()])]),e._m(2),e._m(3),n("v-btn",{attrs:{id:"prev","data-page":"0"},on:{click:function(t){return e.searchNext(!1)}}},[e._v("<=")]),n("v-btn",{attrs:{id:"next","data-page":"0"},on:{click:function(t){return e.searchNext(!0)}}},[e._v("=>")]),n("p",{attrs:{id:"alert","data-page":"0"}}),n("div",{staticClass:"lightboxOverlay",staticStyle:{display:"none",width:"1903px",height:"9167px"},attrs:{id:"lightboxOverlay",tabindex:"-1"}})],1)},qe=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a",{staticClass:"top_tbl_cell logo",attrs:{href:"/"}},[n("img",{attrs:{src:"images/logo.png",alt:""}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",[n("select",{staticClass:"search_confidence",attrs:{id:"confidence",name:"confidence"}},[n("option",[e._v("0")]),n("option",[e._v("5")]),n("option",[e._v("10")]),n("option",[e._v("15")]),n("option",[e._v("20")]),n("option",[e._v("25")]),n("option",[e._v("30")]),n("option",[e._v("35")]),n("option",[e._v("40")]),n("option",[e._v("45")]),n("option",[e._v("50")]),n("option",[e._v("55")]),n("option",[e._v("60")]),n("option",[e._v("65")]),n("option",[e._v("70")]),n("option",[e._v("75")]),n("option",{attrs:{selected:"selected"}},[e._v("85")]),n("option",[e._v("90")]),n("option",[e._v("95")]),n("option",[e._v("100")])])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content_thumb_box"},[n("div",{staticClass:"wrap"},[n("ul",{attrs:{id:"results"}})])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"lightbox",staticStyle:{top:"550px",left:"0px",display:"none"},attrs:{id:"lightbox",tabindex:"-1"}},[n("div",{staticClass:"lb-outerContainer",staticStyle:{width:"163px",height:"215px"}},[n("div",{staticClass:"lb-container"},[n("img",{staticClass:"lb-image",staticStyle:{width:"163px",height:"215px"},attrs:{src:"https://kotortri.s3.us-east-2.amazonaws.com/a96c0fb7898518f0963e08cfc800c937.jpg?id=655",alt:""}}),n("div",{staticClass:"lb-tags"},[n("span",[e._v("#336 - 95%")])]),n("div",{staticClass:"lb-nav",staticStyle:{"pointer-events":"auto"}},[n("a",{staticClass:"lb-prev",attrs:{"aria-label":"Previous image",href:""}}),n("a",{staticClass:"lb-next",attrs:{"aria-label":"Next image",href:""}})]),n("div",{staticClass:"lb-loader",staticStyle:{opacity:"0.837437",display:"none"}},[n("a",{staticClass:"lb-cancel"})])])]),n("div",{staticClass:"lb-dataContainer",staticStyle:{width:"163px"}},[n("div",{staticClass:"lb-data"},[n("div",{staticClass:"lb-details"},[n("span",{staticClass:"lb-caption",staticStyle:{display:"none"}}),n("span",{staticClass:"lb-number"},[e._v("Image 22 of 22")])]),n("div",{staticClass:"lb-closeContainer"},[n("a",{staticClass:"lb-close"})])]),n("a",{staticClass:"btn_add_cart"},[n("img",{attrs:{src:"images/icon-add.png",alt:""}}),n("span",[e._v("Add to Cart")])])])])}],Je=n("b85c"),Qe=Object({NODE_ENV:"production",VUE_APP_VIDEO_API:"https://evening-atoll-24533.herokuapp.com/",VUE_APP_WEBPACK_TARGET:"node",BASE_URL:"/"}).VUE_APP_BACKEND_API,Ye={name:"Home",components:{},data:function(){return{images:[],page:{limit:20,offset:0},limit:20,offset:0,lastSearchQuery:"",selectedConfident:85}},computed:{isLoggedUser:function(){return this.isLogged()}},mounted:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return function(e){var t=this;return function(){var r=Object(u["a"])(regeneratorRuntime.mark((function r(a){var o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a.preventDefault(),e.offset>=e.limit&&(e.offset-=e.limit),r.prev=2,r.next=5,t.searchImages(Qe,{q:e.lastSearchQuery,confidence:e.confidence,limit:e.limit,offset:e.offset});case 5:o=r.sent,t.drawImages(o,n,!1),console.log(o),r.next=14;break;case 10:r.prev=10,r.t0=r["catch"](2),t.notFoundImages(n),console.log("error",r.t0);case 14:case"end":return r.stop()}}),r,null,[[2,10]])})));return function(e){return r.apply(this,arguments)}}()},function(e){var t=this;return function(){var r=Object(u["a"])(regeneratorRuntime.mark((function r(a){var o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a.preventDefault(),e.offset+=e.limit,r.prev=2,r.next=5,t.searchImages(Qe,{q:e.lastSearchQuery,confidence:e.confidence,limit:e.limit,offset:e.offset});case 5:o=r.sent,t.drawImages(o,n,!1),console.log(o),r.next=14;break;case 10:r.prev=10,r.t0=r["catch"](2),t.notFoundImages(n),console.log("error",r.t0);case 14:case"end":return r.stop()}}),r,null,[[2,10]])})));return function(e){return r.apply(this,arguments)}}()},function(e){return Object(u["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=document.body.scrollHeight,r=window.scrollY+window.innerHeight,!(r>=n)){t.next=8;break}return alert("at the bottom"),e.offset+=e.limit,console.log("at the bottom"),t.next=8,e.searchNext();case 8:case"end":return t.stop()}}),t)})))},n=document.getElementById("results"),r={limit:20,offset:0},t.next=7,e.searchImages(Qe,{confidence:e.selectedConfident,limit:r.limit,offset:r.offset});case 7:e.images=t.sent,e.drawImages(e.images,n),document.getElementById("prev"),document.getElementById("next");case 11:case"end":return t.stop()}}),t)})))()},methods:Object(c["a"])(Object(c["a"])(Object(c["a"])({},Object(E["b"])({logout:"authMod/logout"})),Object(E["c"])({isLogged:"authMod/isLoggedIn",getUser:"authMod/getCurrentUser",getCurrentUser:"authMod/getCurrentUser"})),{},{searchSubmit:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){var r,a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.preventDefault(),t.offset=0,r=document.getElementById("results"),a=document.getElementById("searchInput"),o=document.getElementById("confidence"),n.prev=5,t.selectedConfident=o.value,t.lastSearchQuery=a.value,n.next=10,t.searchNext();case 10:console.log(t.images),n.next=18;break;case 13:n.prev=13,n.t0=n["catch"](5),r.innerHTML="Не найдено",t.notFoundImages(r),console.log("error",n.t0);case 18:case"end":return n.stop()}}),n,null,[[5,13]])})))()},searchNext:function(){var e=arguments,t=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){var r,a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.length>0&&void 0!==e[0]&&e[0],r?t.offset+=t.limit:t.offset>=t.limit&&(t.offset-=t.limit),a=document.getElementById("results"),o={q:t.lastSearchQuery,confidence:t.selectedConfident,limit:t.limit,offset:t.offset},n.next=6,t.searchImages(Qe,o);case 6:t.images=n.sent,t.drawImages(t.images,a);case 8:case"end":return n.stop()}}),n)})))()},notFoundImages:function(){document.getElementById("alert").innerHTML="Не найдено"},searchImages:function(e){var t=arguments;return Object(u["a"])(regeneratorRuntime.mark((function n(){var r,a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.length>1&&void 0!==t[1]?t[1]:{},n.prev=1,a="".concat(e,"/api/v1/picture/search?"),r.hasOwnProperty("q")&&(a+="number=".concat(r.q)),r.hasOwnProperty("confidence")&&(r.hasOwnProperty("q")&&(a+="&"),a+="confidence=".concat(r.confidence)),r.hasOwnProperty("eventId")&&(a+="&eventId=".concat(r.eventId)),r.hasOwnProperty("limit")&&(a+="&limit=".concat(r.limit)),r.hasOwnProperty("offset")&&(a+="&offset=".concat(r.offset)),n.next=10,fetch(a);case 10:if(o=n.sent,o.ok){n.next=13;break}return n.abrupt("return",[]);case 13:return n.next=15,o.json();case 15:return n.abrupt("return",n.sent);case 18:return n.prev=18,n.t0=n["catch"](1),console.log("error",n.t0),n.abrupt("return",[]);case 22:case"end":return n.stop()}}),n,null,[[1,18]])})))()},drawImages:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.Pictures;if(0===r.length)n&&(t.innerHTML=""),this.notFoundImages();else{n&&(t.innerHTML="");var a,o="",s=Object(Je["a"])(r);try{for(s.s();!(a=s.n()).done;){var i=a.value;o+=this.drawImage(i,o)}}catch(u){s.e(u)}finally{s.f()}if(n)console.log("needclear"),t.innerHTML=o;else{console.log("notneedclear");var c=document.createElement("div");c.innerHTML=o,t.appendChild(c)}}},drawImage:function(e){var t=e.Path;t="https://"===t.substring(0,"https://".length)?t:"/images/"+t,console.log(t.substring(0,"https://".length));var n='<li data-v-519eea8b="" class="loaded">\n                         <a data-v-519eea8b data-lightbox="lightbox" class="">\n                         <img src="'.concat(t,'" alt="').concat(e.PictureId,'">\n                        </a>');n+="<span>";var r,a=Object(Je["a"])(e.TextDetections);try{for(a.s();!(r=a.n()).done;){var o=r.value;n+="#".concat(o.DetectedText," ").concat(o.Confidence,"% ")}}catch(s){a.e(s)}finally{a.f()}return n}})},Xe=Ye,Ze=n("8336"),et=Object(f["a"])(Xe,$e,qe,!1,null,"6326c8dc",null),tt=et.exports;A()(et,{VBtn:Ze["a"]});var nt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[null!==e.processing?n("div"):n("div",[n("v-form",[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"12",md:"4"}},[n("v-file-input",{attrs:{"show-size":"",label:"File input"},on:{change:e.onChangeFile}})],1),n("v-col",{attrs:{cols:"12",md:"4"}},[n("v-text-field",{attrs:{rules:e.nameRules,counter:255,label:"Title",required:""},on:{change:e.onChangeTitle}})],1),n("v-col",{attrs:{cols:"12",md:"4"}},[n("v-text-field",{attrs:{label:"Description",required:""},on:{change:e.onChangeDescription}})],1),n("v-col",[n("v-btn",{attrs:{type:"submit",value:"upload"},on:{click:e.submitFile}},[e._v("Upload")])],1)],1)],1)],1)],1)])},rt=[],at={name:"UploadVideoPage",data:function(){return{file:void 0,title:"",description:"",processing:null,videoId:null,valid:!1,firstname:"",lastname:"",nameRules:[function(e){return!!e||"Name is required"},function(e){return e.length<=255||"Name must be less than 10 characters"}],email:"",emailRules:[function(e){return!!e||"E-mail is required"},function(e){return/.+@.+/.test(e)||"E-mail must be valid"}]}},methods:Object(c["a"])(Object(c["a"])(Object(c["a"])({},Object(E["b"])({uploadVideo:"eventsMod/newImages"})),Object(E["c"])({getVideoId:"eventsMod/getVideoId",getIsProcessing:"eventsMod/getIsProcessing"})),{},{onChangeFile:function(e){this.file=e},onChangeDescription:function(e){this.description=e},onChangeTitle:function(e){this.title=e},submitFile:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.preventDefault(),n.next=3,t.newImages({file:t.file,title:t.title,description:t.description});case 3:console.log("uploaded"),t.processing=t.getIsProcessing(),t.videoId=t.getVideoId();case 6:case"end":return n.stop()}}),n)})))()}})},ot=at,st=n("23a7"),it=n("4bd4"),ct=n("8654"),ut=Object(f["a"])(ot,nt,rt,!1,null,"1ead47d9",null),lt=ut.exports;A()(ut,{VBtn:Ze["a"],VCol:V["a"],VContainer:T["a"],VFileInput:st["a"],VForm:it["a"],VRow:R["a"],VTextField:ct["a"]});var dt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-row",{staticClass:"margin-bottom-20"},[n("v-col",{attrs:{sm:"12",md:"6","offset-md":"3"}},[n("v-card",{on:{submit:function(e){e.preventDefault()}}},[n("v-card-text",[n("v-text-field",{attrs:{label:"Username","hide-details":"auto"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),e.loginSelected?e._e():n("v-card-text",[n("v-text-field",{attrs:{label:"Путь dropbox папки","hide-details":"auto"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),e.loginSelected?e._e():n("v-card-text"),n("v-card-text",[n("v-text-field",{attrs:{label:"Password","hide-details":"auto"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),n("v-card-actions",[n("v-btn",{on:{click:e.onLoginButtonClick}},[e._v(e._s(e.buttonString))])],1)],1)],1)],1),e.error?n("p",[e._v(e._s(e.error))]):e._e()],1)},pt=[],gt={name:"LoginPage",components:{},data:function(){return{loginSelected:!0,username:"",password:"",email:"",isSubscribed:!1,error:""}},methods:Object(c["a"])(Object(c["a"])({},Object(E["b"])({login:"authMod/login",signup:"authMod/signup"})),{},{toggleLogin:function(){this.loginSelected=!this.loginSelected},onLoginButtonClick:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!e.loginSelected){t.next=6;break}return t.next=4,e.login({username:e.username,password:e.password});case 4:t.next=8;break;case 6:return t.next=8,e.signup({username:e.username,password:e.password,email:e.email,isSubscribed:e.isSubscribed});case 8:return t.next=10,e.$router.push({name:"home"});case 10:t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](0),e.error=t.t0;case 15:case"end":return t.stop()}}),t,null,[[0,12]])})))()}}),computed:{buttonString:function(){return this.loginSelected?"LOGIN":"SIGNUP"},textLoginString:function(){return this.loginSelected?"Signup instead":"Login instead"}}},vt=gt,mt=(n("7266"),n("99d9")),ht=Object(f["a"])(vt,dt,pt,!1,null,"5ebadbe0",null),ft=ht.exports;A()(ht,{VBtn:Ze["a"],VCard:O["a"],VCardActions:mt["a"],VCardText:mt["b"],VCol:V["a"],VContainer:T["a"],VRow:R["a"],VTextField:ct["a"]});var _t=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h2",[e._v(e._s(e.currentUsername))]),n("h4",[e._v("my video")]),n("h5",[e._v("Count you video "+e._s(e.countAllVideos))]),null!==e.videos?n("VideoList",{key:e.page,attrs:{"show-status":!0,"user-page":!0,videos:e.videos}}):e._e()],1)},bt=[],Et=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{fluid:""}},[n("v-row",{attrs:{dense:""}},e._l(e.videoList,(function(t){return n("v-col",{key:t.id,attrs:{cols:3}},[n("VideoItem",{key:t.id,attrs:{video:t,"current-user-id":e.currentUserId,"show-status":e.showStatus,"user-page":e.isUserPage}})],1)})),1)],1)},Pt=[],xt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{staticStyle:{"overflow-y":"auto",height:"340px"}},[n("v-img",{staticClass:"white--text align-end",attrs:{src:e.videoItem.thumbnail,gradient:"to bottom, rgba(0,0,0,.1), rgba(0,0,0,.5)",height:"200px"}}),n("v-card-title"),n("v-card-text",{staticClass:"caption text-lg-left"}),null!==e.status?n("div",[e.status?n("span",[e._v("Success ")]):n("span",[e._v("Failed")]),n("span",[e._v("delete video\n      ")])]):e._e()],1)},wt=[],At={name:"VideoItem",props:["video","showStatus","userPage","currentUserId"],created:function(){},data:function(){return{videoItem:this.video,videoStatus:null,isUserPage:this.userPage,status:null,userId:this.currentUserId,saveToPlaylist:!1,userPlaylists:null,dialog:!1,select:[{text:"State 1"},{text:"State 2"},{text:"State 3"},{text:"State 4"},{text:"State 5"},{text:"State 6"},{text:"State 7"}]}},methods:Object(c["a"])(Object(c["a"])(Object(c["a"])({},Object(E["b"])({deleteVideoPermanent:"eventsMod/deleteEventPermanent"})),Object(E["c"])({getStatus:"eventsMod/getStatus"})),{},{isCurrentUserOwner:function(){return null!==this.userId&&this.videoItem.ownerId===this.userId},deleteItemPermanent:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.deleteEventPermanent({videoId:e});case 2:t.status=t.getStatus();case 3:case"end":return n.stop()}}),n)})))()},toggleDialog:function(){console.log("dialog"),this.dialog=!0}})},kt=At,It=n("adda"),Ot=Object(f["a"])(kt,xt,wt,!1,null,"b386f57a",null),Vt=Ot.exports;A()(Ot,{VCard:O["a"],VCardText:mt["b"],VCardTitle:mt["c"],VImg:It["a"]});var Tt={name:"VideoList",components:{VideoItem:Vt},props:["pageNumber","videos","showStatus","userPage","currentUserId"],data:function(){return{videoList:this.videos,currentPage:this.pageNumber,isUserPage:this.userPage}},mounted:function(){this.videoList=this.videos}},Ct=Tt,Rt=Object(f["a"])(Ct,Et,Pt,!1,null,"43b5fb49",null),Ut=Rt.exports;A()(Rt,{VCol:V["a"],VContainer:T["a"],VRow:R["a"]});var St={name:"User",components:{VideoList:Ut},data:function(){return{videos:null,countVideoOnPage:10,page:0,countAllVideos:0}},created:function(){this.getAsyncVideos()},computed:{user:function(){return this.getUser()},currentUsername:function(){return this.getCurrentUser().username},isLoggedUser:function(){return this.isLoggedIn()}},methods:Object(c["a"])(Object(c["a"])(Object(c["a"])({},Object(E["b"])({fetchUserVideos:"userMod/getUserVideos"})),Object(E["c"])({getUserVideos:"userMod/getUserVideos",getUser:"authMod/getCurrentUser",isLoggedIn:"authMod/isLoggedIn",getCurrentUser:"authMod/getCurrentUser"})),{},{getAsyncVideos:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("start"),t.next=3,e.fetchUserVideos({page:e.page,countVideoOnPage:e.countVideoOnPage});case 3:console.log("end"),n=e.getUserVideos(),console.log("result"),console.log(n),e.videos=n.videos,e.countAllVideos=n.countAllVideos;case 9:case"end":return t.stop()}}),t)})))()}})},jt=St,yt=Object(f["a"])(jt,_t,bt,!1,null,"627de58b",null),Nt=yt.exports,Dt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-container",[n("v-row",[n("button",{staticClass:"btn",on:{click:e.openNewEventPopup}},[e._v("Создать событие")]),n("button",{staticClass:"btn",on:{click:e.openNewImagePopup}},[e._v("Добавить изображения")])]),null!==e.events?n("v-row",[n("v-simple-table",{scopedSlots:e._u([{key:"default",fn:function(){return[n("thead",[n("tr",[n("th",{staticClass:"text-left"},[e._v("\n              Name\n            ")]),n("th",{staticClass:"text-left"},[e._v("\n              Location\n            ")]),n("th",{staticClass:"text-left"},[e._v("\n              Action\n            ")]),n("th",{staticClass:"text-left"},[e._v("\n              Action\n            ")])])]),n("tbody",e._l(e.events,(function(t){return n("tr",{key:t.Id},[n("td",[e._v(e._s(t.Name))]),n("td",[e._v(e._s(t.Location))]),n("td",[n("button",{staticClass:"btn",on:{click:function(n){return e.onDeleteEvent(t.Id)}}},[e._v("Удалить событие")])]),n("td",[n("button",{staticClass:"btn",on:{click:function(n){return e.searchEventImages(t.Id)}}},[e._v("Найти изображения")])])])})),0)]},proxy:!0}],null,!1,3546372782)})],1):e._e()],1),n("v-container",[n("v-row",[n("div",{staticClass:"text-center"},[n("v-dialog",{attrs:{width:"500"},model:{value:e.approveToDeleteEventPermanent,callback:function(t){e.approveToDeleteEventPermanent=t},expression:"approveToDeleteEventPermanent"}},[n("v-card",[n("v-divider"),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"primary",text:""},on:{click:e.approvedDeleteEvent}},[e._v("\n                Подтвердить удаление события\n              ")])],1)],1)],1)],1)]),n("v-row",[n("div",{staticClass:"text-center"},[n("v-dialog",{attrs:{width:"500"},model:{value:e.newEventPopup,callback:function(t){e.newEventPopup=t},expression:"newEventPopup"}},[n("v-card",[n("v-card-title",{staticClass:"text-h5 grey lighten-2"},[e._v("\n              Новые событие\n            ")]),n("v-divider"),n("v-card-text",[n("v-text-field",{attrs:{label:"Название",rules:e.rules,"hide-details":"auto"},model:{value:e.eventName,callback:function(t){e.eventName=t},expression:"eventName"}})],1),n("v-card-text",[n("v-text-field",{attrs:{rules:e.rules,label:"Локация"},model:{value:e.eventLocation,callback:function(t){e.eventLocation=t},expression:"eventLocation"}})],1),n("v-card-text",[n("v-date-picker",{staticClass:"mt-4",attrs:{min:"1980-06-15",max:"2100-03-20"},model:{value:e.eventDate,callback:function(t){e.eventDate=t},expression:"eventDate"}})],1),n("v-divider"),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"primary",text:""},on:{click:e.submitNewEvent}},[e._v("\n                Сохранить\n              ")])],1)],1)],1)],1),n("div",{staticClass:"text-center"},[n("v-dialog",{attrs:{width:"500"},model:{value:e.newImageToProcessingPopup,callback:function(t){e.newImageToProcessingPopup=t},expression:"newImageToProcessingPopup"}},[n("v-card",[n("v-card-title",{staticClass:"text-h5 grey lighten-2"},[e._v("\n              Новые изображения\n            ")]),n("v-divider"),n("v-card-text",[n("v-text-field",{attrs:{label:"Путь dropbox папки",rules:e.path,"hide-details":"auto"},model:{value:e.dropboxPath,callback:function(t){e.dropboxPath=t},expression:"dropboxPath"}})],1),n("v-card-text",[n("v-select",{attrs:{items:e.options,label:"event"},on:{input:function(t){return e.setEventId(e.eventId)}},model:{value:e.eventId,callback:function(t){e.eventId=t},expression:"eventId"}}),n("td",[e._v(e._s(e.eventId))])],1),n("v-divider"),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"primary",text:""},on:{click:e.submitNewImages}},[e._v("\n                Отправить\n              ")])],1)],1)],1)],1)])],1),e.isShow?n("v-container",[e.images.length>0?n("v-row",[e.countPages>0?n("v-col",{attrs:{cols:12}},[n("v-btn",{on:{click:e.previousPage}},[e._v("<=")]),n("v-btn",{staticClass:"disabled"},[e._v(e._s(e.imagePage+1)+" of "+e._s(e.countPages))]),n("v-btn",{on:{click:e.nextPage}},[e._v("=>")])],1):e._e(),e._l(e.images,(function(t){return n("v-col",{key:t.PictureId,attrs:{cols:4,sm:"12",md:"3"}},[n("v-card",[n("v-img",{staticClass:"white--text align-end",attrs:{src:t.Path,gradient:"to bottom, rgba(0,0,0,.1), rgba(0,0,0,.5)",height:"200px"}}),n("v-card-actions",[n("v-btn",{on:{click:function(n){return e.onDeleteEvent(t.PictureId,"picture")}}},[e._v("Удалить")])],1)],1)],1)}))],2):n("v-row",[n("p",[e._v("Не найдено")])])],1):e._e()],1)},Mt=[],Lt=(n("25eb"),n("a9e3"),Object({NODE_ENV:"production",VUE_APP_VIDEO_API:"https://evening-atoll-24533.herokuapp.com/",VUE_APP_WEBPACK_TARGET:"node",BASE_URL:"/"}).VUE_APP_BACKEND_API),Bt={name:"Playlist",components:{},data:function(){return{events:null,images:null,isShow:!1,imagePage:null,limit:20,countPages:null,status:null,approveToDeleteEventPermanent:!1,newImageToProcessingPopup:!1,newEventPopup:!1,deleteEventId:null,action:null,eventId:null,eventName:null,eventDate:null,eventLocation:null,dropboxPath:null,rules:[function(e){return!!e||"Required."},function(e){return e&&e.length>=3||"Min 3 characters"}],path:[function(e){return!!e||"Required."},function(e){return e&&e.length>=2&&"/"===e[0]||"Min 2 characters"}]}},created:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchEvents();case 2:case"end":return t.stop()}}),t)})))()},computed:{options:function(){if(null!==this.events){var e=[];return this.events.forEach((function(t){e.push(t.Id+" "+t.Name)})),e}return[]}},methods:Object(c["a"])(Object(c["a"])(Object(c["a"])({},Object(E["b"])({findEvents:"eventsMod/findEvents",createNewEvent:"eventsMod/createEvent",newImagesToRekognition:"eventsMod/newImages",deleteEvent:"eventsMod/deleteEventPermanent",deletePicture:"eventsMod/deleteImagePermanent"})),Object(E["c"])({getStatus:"eventsMod/getStatus",getMessage:"eventsMod/getMessage",getEvents:"eventsMod/getEvents"})),{},{fetchEvents:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.findEvents();case 2:n=t.sent,console.log("data"),console.log(n),console.log("data"),e.events=n;case 7:case"end":return t.stop()}}),t)})))()},onDeleteEvent:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"event";console.log("eventId"),console.log(e),this.deleteEventId=e,this.action=t,this.approveToDeleteEventPermanent=!0},approvedDeleteEvent:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var n,r,a,o,s,i,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.action,console.log("eventId"),e.approveToDeleteEventPermanent=!1,r=e.deleteEventId,console.log(r),"event"!==n){t.next=10;break}return t.next=8,e.deleteEvent({eventId:r});case 8:t.next=13;break;case 10:if("picture"!==n){t.next=13;break}return t.next=13,e.deletePicture({pictureId:r});case 13:if(a=1===e.getStatus(),a)if(o=0,s=[],"event"===n){for(;o<e.events.length;o++)i=e.events[o],i.Id!==r&&s.push(i);e.events=s}else if("picture"===n){for(;o<e.images.length;o++)c=e.images[o],c.PictureId!==r&&s.push(c);e.images=s}e.deleteEventId=null,g(a,e.getMessage());case 17:case"end":return t.stop()}}),t)})))()},openNewEventPopup:function(){this.newEventPopup=!0},submitNewEvent:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var n,r,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.newEventPopup=!1,null!==e.eventName&&null!==e.eventLocation&&null!==e.eventDate){t.next=4;break}return g(a,"invalid event name or event location"),t.abrupt("return");case 4:if(n=!e.rules[1](e.eventName),r=null!==e.eventLocation&&!e.rules[1](e.eventLocation),console.log(r),console.log(n),!n&&!r){t.next=11;break}return g(a,"invalid event name or event location"),t.abrupt("return");case 11:return console.log(e.eventName),console.log(e.eventDate),console.log(e.eventLocation),t.next=16,e.createNewEvent({name:e.eventName,location:e.eventLocation,date:e.eventDate});case 16:a=e.getStatus(),o=e.getMessage(),a&&e.events.push({Id:Number.parseInt(o.substring(o.lastIndexOf(" "))),Name:e.eventName,Date:e.eventDate,Location:e.eventLocation}),g(a,o);case 20:case"end":return t.stop()}}),t)})))()},openNewImagePopup:function(){this.newImageToProcessingPopup=!0},submitNewImages:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(null!==e.dropboxPath&&null!==e.eventId){t.next=3;break}return g(!1,"Invalid "),t.abrupt("return");case 3:if(n=!e.path[1](e.dropboxPath),console.log(n),!n){t.next=8;break}return g(!1,"invalid event name or event location"),t.abrupt("return");case 8:return t.next=10,e.newImagesToRekognition({path:e.dropboxPath,eventId:e.eventId}).then().then((function(e){return console.log(e)}));case 10:e.newImageToProcessingPopup=!1,g(!0,"Отправлено на обработку");case 12:case"end":return t.stop()}}),t)})))()},setEventId:function(e){console.log(e),this.eventId=Number.parseInt(e.substring(0,e.indexOf(" ")))},searchEventImages:function(e){var t=arguments,n=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){var a,o,s,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=t.length>1&&void 0!==t[1]?t[1]:0,n.isShow=!0,n.eventId=e,r.next=5,oe.a.get("".concat(Lt,"/api/v1/picture/search?eventId=").concat(e,"&offset=").concat(n.imagePage*n.limit));case 5:o=r.sent,s=o.data,i=Math.ceil(s.CountAllItems/n.limit),console.log(i),n.countPages=i,n.imagePage=a,n.images=s.Pictures,console.log(s);case 13:case"end":return r.stop()}}),r)})))()},previousPage:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log(e.imagePage),!(e.imagePage>0)){t.next=5;break}return e.imagePage--,t.next=5,e.searchEventImages(e.eventId,e.imagePage);case 5:case"end":return t.stop()}}),t)})))()},nextPage:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log(e.imagePage),!(e.imagePage<e.countPages-1)){t.next=5;break}return e.imagePage++,t.next=5,e.searchEventImages(e.eventId,e.imagePage);case 5:case"end":return t.stop()}}),t)})))()}})},Kt=Bt,Gt=n("2e4b"),Ht=n("169a"),zt=n("ce7e"),Ft=n("b974"),Wt=n("1f4f"),$t=n("2fa4"),qt=Object(f["a"])(Kt,Dt,Mt,!1,null,"7e926430",null),Jt=qt.exports;function Qt(e){return{home:{name:"home",path:"/",component:tt},user:{name:"user",path:"/user/",component:Nt,beforeEnter:function(t,n,r){e.getters["authMod/isLoggedIn"]?r():r({name:"login"})}},uploadVideo:{name:"uploadVideo",path:"/uploadVideo",component:lt,beforeEnter:function(t,n,r){var a=e.getters["authMod/isLoggedIn"];a?r():r({name:"login"})}},admin:{name:"admin",path:"/admin",component:Jt,beforeEnter:function(t,n,r){e.getters["authMod/isLoggedIn"]?r():r({name:"login"})}},login:{name:"login",path:"/login",component:ft,beforeEnter:function(t,n,r){e.getters["authMod/isLoggedIn"]?r({name:"uploadVideo"}):r()}}}}function Yt(e){e.use(We["a"])}A()(qt,{VBtn:Ze["a"],VCard:O["a"],VCardActions:mt["a"],VCardText:mt["b"],VCardTitle:mt["c"],VCol:V["a"],VContainer:T["a"],VDatePicker:Gt["a"],VDialog:Ht["a"],VDivider:zt["a"],VImg:It["a"],VRow:R["a"],VSelect:Ft["a"],VSimpleTable:Wt["a"],VSpacer:$t["a"],VTextField:ct["a"]});var Xt=function(){var e,t=function(e){return new We["a"]({mode:"history",routes:[Qt(e).home,Qt(e).login,Qt(e).admin]})};return{getInstance:function(n){return e||(e=t(n))}}}(),Zt=Xt;function en(e){ze(e),Yt(e)}r["a"].config.productionTip=!1,en(r["a"]);var tn=Fe(),nn=Zt.getInstance(tn);new r["a"]({router:nn,store:tn,vuetify:K,render:function(e){return e(M)}}).$mount("#app")},"5d16":function(e,t,n){},7266:function(e,t,n){"use strict";n("92e0")},"850d":function(e,t){},"92e0":function(e,t,n){},d849:function(e,t,n){"use strict";n("46e0")}});
//# sourceMappingURL=app.de852527.js.map